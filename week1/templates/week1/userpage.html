{% extends 'week1/basehome.html'%}

{% block content %}
{% load staticfiles %}


<div id="home-main">
    
    <div id="home-firstcolumn">
      
	<div class="home-step">
	   <br>
        <table width="300"><tr><td width="10"></td>
            <td width="120" valign="top">
                
                <div class="tableLabel">
			     Skills:
                </div>
            </td><td>
           {% if target_profile.skill1 and target_profile.skill1 != ""%}	
           {{target_profile.skill1}}
           {% endif %}
           {% if target_profile.skill2 and target_profile.skill2 != ""%}	
           &nbsp{{target_profile.skill2}}
           {% endif %}
           {% if target_profile.skill3 and target_profile.skill3 != ""%}	
           &nbsp{{target_profile.skill3}}
           {% endif %}
           {% if target_profile.skill4 and target_profile.skill4 != ""%}	
           &nbsp{{target_profile.skill4}}
           {% endif %}
           {% if target_profile.skill5 and target_profile.skill5 != ""%}	
           &nbsp{{target_profile.skill5}}
           {% endif %}
           {% if target_profile.skill6 and target_profile.skill6 != ""%}	
           &nbsp{{target_profile.skill6}}
           {% endif %}
           {% if target_profile.skill7 and target_profile.skill7 != ""%}	
           &nbsp{{target_profile.skill7}}
           {% endif %}
           {% if target_profile.skill8 and target_profile.skill8 != ""%}	
           &nbsp{{target_profile.skill8}}
           {% endif %}
           {% if target_profile.skill9 and target_profile.skill9 != ""%}	
           &nbsp{{target_profile.skill9}}
           {% endif %}
           {% if target_profile.skill10 and target_profile.skill10 != ""%}	
           &nbsp{{target_profile.skill10}}
           {% endif %}
          
            </td>
            </tr>
            <tr>
                <td>
                <br>
                </td>
            </tr>
            <tr><td width="10"></td>
                <td valign="top">
                    
                    <div class="tableLabel">
                    City:
                    </div>
               </td>
                <td>
                     {{target_profile.city}}
                </td>
            </tr>
            <tr>
                <td width="20"></td>
                <td valign="top">
                    
                    <div class="tableLabel">
                    Work at: 
                    </div>
                </td>
                    
                <td>
                {{target_profile.worksAt}}
                </td>
                      
                <td valign="top">  
                    
                </td>
            </tr>      
            <tr><td width="20"></td>
                <td valign="top">
                    <div class="tableLabel">
                    Education:
                    </div>
               </td>
                <td>
                     {{target_profile.education}}
                </td>
                <td valign="top">  
                   
                </td>
            </tr>
            <tr>
                <td width="20"></td>
                <td valign="top">
                    
                    <div class="tableLabel">
                    Language:
                    </div>
                </td>
                <td>{{target_profile.language}}
                </td>
                <td valign="top">  
                </td>
            </tr>
            <tr>
            </tr>
            
            <tr>
                <td>
                <br>
                </td>
            </tr>
            <tr><td width="20"></td>
                <td valign="top">
                    
                    <div class="tableLabel">
                        Website:
                    </div>
                    
                </td>
                <td>
                     {{ target_profile.weburl }} 
                </td>
            </tr>
            
            <tr>
                <td>
                <br>
                </td>
            </tr>
            <tr>
                <td width="20"></td>
                <td valign="top">
                    
                    <div class="tableLabel">
                Interested in: 
                    </div>
                </td>
                <td>
                    
				{% if target_profile.interestproject == 0%}
				  Project Type not Selected
				{% endif %}
                    
				{% if target_profile.interestproject == 1%}
				  Side projects
				{% endif %}

				{% if target_profile.interestproject == 2 %}  
				  Short term projects
				{% endif %}

				{% if target_profile.interestproject == 3 %}  
				  Long term projects
				{% endif %}

				{% if target_profile.interestproject == 4 %}  
				  Full-time projects
				{% endif %}
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td valign="top">
                    
                    <div class="tableLabel">
                    Want to explore: 
                    </div>
                </td>
                <td>
                    {{target_profile.explore}}
                </td>
                <td>
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td valign="top">
                    
                    <div class="tableLabel">
                    Hobby: 
                    </div>
                </td>
                <td>
                    {{target_profile.hobby}}
                </td>
                <td>
                </td>
            </tr>

            <tr>
                <td>
                </td>
                <td valign="top">
                    
                    <div class="tableLabel">
                    Favorite quote: 
                    </div>
                </td>
                <td>
                    {{target_profile.fQuote}}
                </td>
                <td>
                </td>
            </tr>
            
            
            <tr>
                <td>
                </td>
                <td valign="top">
                    
                    <div class="tableLabel">
                    Films I love: 
                    </div>
                </td>
                <td>
                    {{target_profile.fFilm}}
                </td>
                <td>
                </td>
            </tr>
            
            
            
            <tr>
                <td>
                </td>
                <td valign="top">
                    
                    <div class="tableLabel">
                    Books I love: 
                    </div>
                </td>
                <td>
                    {{target_profile.fBook}}
                </td>
                <td>
                </td>
            </tr>
            
            <tr>
                <td>
                </td>
                <td valign="top">
                    
                    <div class="tableLabel">
                    Lived in: 
                    </div>
                </td>
                <td>
                    {{target_profile.cities}}
                </td>
                <td>
                </td>
            </tr>
            
            </table> 
	</div>

    </div>

    <div id="home-secondcolumn">
		<div class="home-step">
			<table>
                <tr>
                    <td width="10px">
                    </td>
                    <td>
                    <br>
                    {% if target_profile.photo %}
                        <img src="{{ target_profile.photo.url }}" class="mainprofile">
                    {% else %}
                        <img src="{% static 'images/profileimage.png'%}" class="mainprofile" width="180">
                    {% endif %}
                    </td>
                 </tr>
        	</table>	
    	</div>
		<div class="home-step-out">
	 		<table>
                <tr>
                    <td width="20px"></td>
                    <td width="250px" >
                        <h3 halign="center">{{t_user.first_name}}&nbsp{{t_user.last_name}}</h3> 
                            <h4 halign="center">{{target_profile.profession1}} &nbsp {{target_profile.profession2}} &nbsp {{target_profile.profession3}} &nbsp {{target_profile.profession4}} &nbsp {{target_profile.profession5}}</h4>
                            <p halign="center">{{target_profile.describe}}</p>
                    </td>
                </tr>
        	</table>
        </div>
    </div>

    <div id="home-thirdcolumn">
       <ul style="list-style-type:none">
	 	 <!--li><img src="{% static 'images/hat.png'%}" class="icons-img"><span id="hatsoffNum"></span></li>
         <li>Thanks &nbsp<span id="thanksNum"></span></li>
         <li>Follow &nbsp<span id="followNum"></span></li>
	 	<li><div class="popupHatsoff" onclick="popHatsoff()"><img src="{% static 'images/hat.png'%}" class="icons-img"><span id="hatsoffNum"></br><span class="popuptextHatsoff" id="hatsoffPop">Give a Hatsoff?</br><button onclick="hatsoffFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">No</button></span></div><div class="popupGavehatsoff"><span class="popuptextGavehatsoff" id="gavehatsoffPop">Gave a Hatsoff!</span></div></li>
	 	<li><div class="popupFollow" onclick="popFollow()">Follow&nbsp<span id="followNum"></br><span class="popuptextFollow" id="followPop">Follow this user?</br><button onclick="followFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">Not Now</button></span></div><div class="popupFollowed"><span class="popuptextFollowed" id="followedPop">Followed the user!</span></div></li-->
		<!--li><div class="popupHatsoff" onclick="hatsoffFunction(5, -1)"><img src="{% static 'images/hat.png'%}" class="icons-img"><span class="popuptextHatsoff" id="hatsoffPop">Tip off your hat</span><span id="hatsoffNum"></span></div></li-->
		<!--li><div class="followstatus"><div class="popupFollow" onclick="followFunction()">Follow &nbsp<span class="popuptextFollow" id="followPop">Following</span><span id="followNum"></span></div></div></li-->
		<li><div id="hatsoff-profile"></div></li>
		<li><div id="follow-profile"></div></li>

        <!--li><a href="#" class="addClass"><img src="{% static 'images/chat.png'%}" class="icons-img"></a></li>
	 	<li><a href="#" class="addClass"><i class="fa fa-handshake-o fa-2x" aria-hidden="true" ></i></a></li-->
        <li><a href="#" onclick="defaultMessage(1)"><i class="fa fa-comment-o fa-2x" aria-hidden="true"></i></a></li>
        <li><a href="#" onclick="collaborateFunction(5, 0)">Collaborate</a></li>
	 	<li><a href="#" onclick="defaultMessage(2)"><i class="fa fa-handshake-o fa-2x" aria-hidden="true" ></i></a></li>
        <li><a href="#" onclick="addCommunityFunction({{t_user.id}})" id="add-request">Add</a></li>

       </ul>

       <!--div class="home-bottom">
	    <ul style="list-style-type:none">
            </br>  <li><div class="popupHatsoff" onclick="popHatsoff()"><img src="{% static 'images/hat.png'%}" class="icons-img"></br><span class="popuptextHatsoff" id="hatsoffPop">Give a Hatsoff?</br><button onclick="hatsoffFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">No</button></span></div><div class="popupGavehatsoff"><span class="popuptextGavehatsoff" id="gavehatsoffPop">Gave a Hatsoff!</span></div></li>
              <li><div class="popupThanks" onclick="popThanks()">Thanks</br><span class="popuptextThanks" id="thanksPop">Give a thanks?</br><button onclick="thanksFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">No</button></span></div><div class="popupGave"><span class="popuptextGave" id="gavePop">Gave a Thanks!</span></div></li>
              <li><div class="popupFollow" onclick="popFollow()">Follow</br><span class="popuptextFollow" id="followPop">Follow this user?</br><button onclick="followFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">Not Now</button></span></div><div class="popupFollowed"><span class="popuptextFollowed" id="followedPop">Followed the user!</span></div></li>
	      <li><a href=""><img src="{% static 'images/contribute.png'%}" class="icons-img"></a></li>
	      <li><img src="{% static 'images/recommend.png'%}" class="icons-img"></li>
	      <li><img src="{% static 'images/help.png'%}" class="icons-img"></li>
	    </ul>
       </div-->
    </div>

<div id="home-main-center">

	<div class="home-step">
        <h3>Portfolio</h3>
           <div class="carousel slide" data-ride="carousel" id="quote-carousel" data-interval="false">
                <!-- Carousel Slides / Quotes -->
                <div class="carousel-inner text-center">

	                    <!-- Quote 1 -->
			    {% if showcases %}
					{% for showcase in showcases %}
				    {% if forloop.counter == 1 %}
				    <div class="item active">
	                    
	                    
					<blockquote>
					    <!--div class="row">
						<div class="col-sm-8 col-sm-offset-2"-->
						    {% if showcase.image or showcase.video or showcase.youtube %}

							{% if showcase.image %}
							   	<div class="display-image">
									{% if '.pdf' in showcase.image.url %}
								    <!--embed src="{{ showcase.image.url }}" width="300px" height="450px" /-->
								    <object data="{{ showcase.image.url }}" width="350px" height="450px" />
								    </object>
								    {% else %}
								    <object data="{{ showcase.image.url }}" width="350px" />
								    </object>
								    <!--img src="{{ showcase.image.url }}" class="maincontent"-->
								    {% endif %}
							   	</div>
							{% endif %}

							{% if showcase.video %}
							    <video controls id="video">
							        <source src="{{ showcase.video.url }}" class="maincontent" type="video/mp4">
							    </video>
							{% endif %}

							{% if showcase.youtube %}
							   <!--object style="height: 320px; width: 500px"><param name="movie" value="{{showcase.youtube}}"><param name="allowFullScreen" value="true"><param name="allowScriptAccess" value="always"><embed src="{{showcase.youtube}}" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="400" height="300"></object-->
							   <div class="display-image">
							   <iframe width="350" height="280" src="{{showcase.youtube}}" frameborder="0" allowfullscreen></iframe>
							   </div>
							{% endif %}

	                        {% else %}
							<div class="display-image">
								<img src="{% static 'images/empty_showcase.png'%}" class="maincontent">
							</div>
	                        {% endif %}

	                        <table width="750">
		                        <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Title: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.title}}
					                </td>
					                      
					            </tr>     

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Description: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.describe}}
					                </td>
					                      
					            </tr>

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Your role: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.role1}} &nbsp {{showcase.role2}} &nbsp {{showcase.role3}} &nbsp {{showcase.role4}} &nbsp {{showcase.role5}}
					                </td>
					                      
					            </tr>

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Year of completion: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.completion}}
					                </td>
					                      
					            </tr>

					             <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Keywords: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.tag1}} &nbsp {{showcase.tag2}} &nbsp {{showcase.tag3}} &nbsp {{showcase.tag4}} &nbsp {{showcase.tag5}} &nbsp {{showcase.tag6}} &nbsp {{showcase.tag7}} &nbsp {{showcase.tag8}} &nbsp {{showcase.tag9}} &nbsp {{showcase.tag10}}
					                </td>
					                      
					            </tr>
				            </table>
							    <!--ul style="list-style-type:none; padding-left:0px;">
								<li>Title:{{showcase.title}}</li>
								<li>Description:{{showcase.describe}}</li>
								<li>Your role:{{showcase.role1}} &nbsp {{showcase.role2}} &nbsp {{showcase.role3}} &nbsp {{showcase.role4}} &nbsp {{showcase.role5}}</li>
								<li>Year of completion:{{showcase.completion}}</li>
							    </ul-->

	                        <hr class="divider"/>

						    <div id="portfolioLike_{{forloop.counter}}" class="popupLike"></div>
						    <!--div class="popupLike" onclick="popLike()"><button onclick="likeFunction(3, {{forloop.counter}})">Like</button><br><span class="popuptextLike" id="likePop">You Liked it<br></span></div-->
	 						<div class="popupShare" onclick="shareFunction(3, {{forloop.counter}})"> Share &nbsp <span class="popuptextShared" id="sharedPop">Shared!<br></span></div>
						    <div class="popupHatsoff" id="hatsoffstatus_portfolio_{{forloop.counter}}"><img src="{% static 'images/2hats-01.png'%}" class="icons-img" onclick="hatsoffFunction(3, {{forloop.counter}})"></div>
						    <!--div class="popupFollow" onclick="followFunction()">Follow &nbsp<br><span class="popuptextFollow" id="followPop">Following<br></span></div-->
	              			<div class="popupCollaborate" onclick="collaborateFunction(3, {{forloop.counter}})"><button class="collaborate-btn">Collaborate &nbsp</button><span class="popuptextCollaborate" id="collaboratePop">Collaborated<br></span></div>


							<div class="comment-container">
		                        <div class="well well-ssm">
			                        <ul id="portfolioComment_{{forloop.counter}}" style="list-style-type:none;">
			                        	
			                        </ul>

			                        <form class="form-horizontal" action="">
				                        <div class="form-group">
					                        <div class="col-md-15">
					                        	<textarea class="form-control" id="c_portfolio_{{forloop.counter}}" autocomplete="off" name="message" placeholder="Please enter your comment here..." rows="3" style="width:520px;"></textarea>
					                        </div>
					                    </div>
					                    <div class="form-group">
					                        <div class="col-md-12 text-right">
					                        	<button class="btn btn-primary btn-lg" onclick="return submitShowcaseComment({{forloop.counter}})">Post</button>
				                        	</div>
			                        	</div>
			                        </form>

		                        </div>
	                        </div>

					</blockquote>
				    </div>

	                {% else %}
				    <div class="item">
				    <blockquote>
				    <!--div class="row">
						<div class="col-sm-8 col-sm-offset-2"-->

	                    <br>
	 					    {% if showcase.image or showcase.youtube %}
								{% if showcase.image %}
									{% if '.pdf' in showcase.image.url %}
								    <!--embed src="{{ showcase.image.url }}" width="300px" height="450px" /-->
								    <object data="{{ showcase.image.url }}" width="350px" height="450px" />
								    </object>

								    {% else %}
								    <!--img src="{{ showcase.image.url }}" class="maincontent"-->
								    <object data="{{ showcase.image.url }}" width="350px" />
								    </object>
								    {% endif %}
								{% endif %}

								{% if showcase.youtube %}
									<div class="display-image">
							   			<iframe width="350" height="280" src="{{showcase.youtube}}" frameborder="0" allowfullscreen></iframe>
							   		</div>
								{% endif %}

						    {% else %}	
						    <div class="display-image">
								<img src="{% static 'images/empty_showcase.png'%}" class="maincontent">
							</div>
						    {% endif %}

						    <table width="750">
		                        <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Title: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.title}}
					                </td>
					                      
					            </tr>     

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Description: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.describe}}
					                </td>
					                      
					            </tr>

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Your role: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.role1}} &nbsp {{showcase.role2}} &nbsp {{showcase.role3}} &nbsp {{showcase.role4}} &nbsp {{showcase.role5}}
					                </td>
					                      
					            </tr>

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Year of completion: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.completion}}
					                </td>
					                      
					            </tr>

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Keywords: 
					                    </div>
					                </td>
					                    
					                <td>
					                {{showcase.tag1}} &nbsp {{showcase.tag2}} &nbsp {{showcase.tag3}} &nbsp {{showcase.tag4}} &nbsp {{showcase.tag5}} &nbsp {{showcase.tag6}} &nbsp {{showcase.tag7}} &nbsp {{showcase.tag8}} &nbsp {{showcase.tag9}} &nbsp {{showcase.tag10}}
					                </td>
					                      
					            </tr>
				            </table>

	                        <hr class="divider"/>

						    <div id="portfolioLike_{{forloop.counter}}" class="popupLike"></div>
							<div class="popupLike" onclick="popLike()"><button onclick="likeFunction(3, {{forloop.counter}})">Like</button><br><span class="popuptextLike" id="likePop">You Liked it<br></span></div>
	 						<!--div class="popupShare" onclick="popShare()">Share &nbsp</br><span class="popuptextShare" id="sharePop">Share this project?</br><button onclick="shareFunction(3, {{forloop.counter}})" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">Not Now</button></span></div><div class="popupShared"><span class="popuptextShared" id="sharedPop">Shared!</span></div>
						    <div class="popupHatsoff" onclick="popHatsoff()"><img src="{% static 'images/hat.png'%}" class="icons-img"></br><span class="popuptextHatsoff" id="hatsoffPop">Give a Hatsoff?</br><button onclick="hatsoffFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">No</button></span></div><div class="popupGavehatsoff"><span class="popuptextGavehatsoff" id="gavehatsoffPop">Gave a Hatsoff!</span></div>
						    <div class="popupFollow" onclick="popFollow()">Follow</br><span class="popuptextFollow" id="followPop">Follow this user?</br><button onclick="followFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">Not Now</button></span></div><div class="popupFollowed"><span class="popuptextFollowed" id="followedPop">Followed the user!</span></div-->
	 						<div class="popupShare" onclick="shareFunction(3, {{forloop.counter}})"> Share &nbsp <span class="popuptextShared" id="sharedPop">Shared!<br></span></div>
                            <div class="popupHatsoff" id="hatsoffstatus_portfolio_{{forloop.counter}}"><img src="{% static 'images/2hats-01.png'%}" class="icons-img" onclick="hatsoffFunction(3, {{forloop.counter}})"></div>
						    <!--div class="popupFollow" onclick="followFunction()">Follow &nbsp<br><span class="popuptextFollow" id="followPop">Following<br></span></div-->
	              			<div class="popupCollaborate" onclick="collaborateFunction(3, {{forloop.counter}})"><button class="collaborate-btn">Collaborate &nbsp</button><span class="popuptextCollaborate" id="collaboratePop">Collaborated<br></span></div>

							<div class="comment-container">
		                        <div class="well well-ssm">
			                        <ul id="portfolioComment_{{forloop.counter}}" style="list-style-type:none;">
			                        	
			                        </ul>

			                        <form class="form-horizontal" action="">
				                        <div class="form-group">
					                        <div class="col-md-15">
					                        	<textarea class="form-control" id="c_portfolio_{{forloop.counter}}" autocomplete="off" name="message" placeholder="Please enter your comment here..." rows="3" style="width:520px;"></textarea>
					                        </div>
					                    </div>
					                    <div class="form-group">
					                        <div class="col-md-12 text-right">
					                        	<button class="btn btn-primary btn-lg" onclick="return submitShowcaseComment({{forloop.counter}})">Post</button>
				                        	</div>
			                        	</div>
			                        </form>

		                        </div>
	                        </div>
	                                            
						<!--/div>
					</div-->
					</blockquote>
				    </div>
	                {% endif %}
	                {% endfor %}
                {% else %}
					<div class="display-image">
		            	<img src="{% static 'images/empty_showcase.png'%}" class="maincontent">
		            </div>

		            <table width="750">
		                        <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Title: 
					                    </div>
					                </td>
					                    
					                <td>
					                </td>
					                      
					            </tr>     

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Description: 
					                    </div>
					                </td>
					                    
					                <td>
					                </td>
					                      
					            </tr>

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Your role: 
					                    </div>
					                </td>
					                    
					                <td>
					                </td>
					                      
					            </tr>

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Year of completion: 
					                    </div>
					                </td>
					                    
					                <td>
					                </td>
					                      
					            </tr>

					            <tr>
					                <td width="50"></td>
					                <td valign="top" class="tableTitle">
					                    <div class="tableLabel">
					                    Keywords: 
					                    </div>
					                </td>
					                    
					                <td>
					                </td>
					                      
					            </tr>
				            </table>
                {% endif %}
                </div>

                <!-- Carousel Buttons Next/Prev -->
                <!--a data-slide="prev" href="#quote-carousel" class="left carousel-control"><i class="fa fa-chevron-left"></i></a>
                <a data-slide="next" href="#quote-carousel" class="right carousel-control"><i class="fa fa-chevron-right"></i></a-->
                <a data-slide="prev" href="#quote-carousel" class="carousel-control left">&lsaquo;</a>
                <a data-slide="next" href="#quote-carousel" class="carousel-control right">&rsaquo;</a>
            </div> 
 	</div>


	<div class="home-step">
        <script>
		function show_upcoming(){
		    $('#upcomingComment').show();
		    $('#upcoming_hide').show();
		    $('#upcoming_show').hide();
		};

		function hide_upcoming(){
                    console.log('hide more!');
		    $('#upcomingComment').hide();
		    $('#upcoming_hide').hide();
		    $('#upcoming_show').show();
		};
        </script>

        <h3>Upcoming Project</h3>

        <br>
	    {% if upcoming %}
	        {% if upcoming.image %}

	        	{% if upcoming.image %}
					<div class="display-image">
					{% if '.pdf' in upcoming.image.url %}
					    <embed src="{{ upcoming.image.url }}" class="maincontent" />
					{% else %}
					    <embed src="{{ upcoming.image.url }}" class="maincontent" />
					    <!--img src="{{ upcoming.image.url }}" class="maincontent"-->
					{% endif %}
					</div>
				{% endif %}

	        {% else %}
			<div class="display-image">
	            <img src="{% static 'images/empty_showcase.png'%}" class="maincontent">
	        </div>
	        {% endif %}
	    {% else %}
			<div class="display-image">
	        	<img src="{% static 'images/empty_showcase.png'%}" class="maincontent">
	        </div>
	    {% endif %}

	    {% if upcoming %}
	     	<table width="750">
	            <tr>
					<td width="50"></td>
					<td valign="top" class="tableTitle">
					    <div class="tableLabel">
					       Title: 
					    </div>
					</td>
					                    
					<td>
					    {{upcoming.title}}
					</td>
				                      
				</tr>     

				<tr>
				    <td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				            Description: 
				        </div>
				    </td>
				                    
				    <td>
				        {{upcoming.describe}}
				    </td>
				                      
				</tr>

				<tr>
				    <td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				            Your role: 
				        </div>
				    </td>
				                    
				    <td>
				        {{upcoming.role1}} &nbsp {{upcoming.role2}} &nbsp {{upcoming.role3}} &nbsp {{upcoming.role4}} &nbsp {{upcoming.role5}}
				    </td>
				                      
				</tr>

				<tr>
				    <td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				        	Status:
				        </div>
				    </td>
				                    
				    <td>
				        {{upcoming.status}}
					</td>
				                      
				</tr>

				<tr>
					<td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				        	Keywords:
				        </div>
				    </td>
				                    
				    <td>
				        {{upcoming.tag1}} &nbsp {{upcoming.tag2}} &nbsp {{upcoming.tag3}} &nbsp {{upcoming.tag4}} &nbsp {{upcoming.tag5}} &nbsp {{upcoming.tag6}} &nbsp {{upcoming.tag7}} &nbsp {{upcoming.tag8}} &nbsp {{upcoming.tag9}} &nbsp {{upcoming.tag10}}
					</td>
				</tr>

			</table>

			<h4 align="center" class="tableLabel">Collaborators I'd love!</h4>
			<table width="750">
	            <tr>
					<td width="50"></td>
					<td valign="top" class="tableTitle">
					    <div class="tableLabel">
					       Collaborators: 
					    </div>
					</td>
					                    
					<td>
					    {{upcoming.collaborator1}} &nbsp {{upcoming.collaborator2}} &nbsp {{upcoming.collaborator3}} &nbsp {{upcoming.collaborator4}} &nbsp {{upcoming.collaborator5}}
					</td>
				                      
				</tr>     

				<tr>
				    <td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				        	Skills:
				        </div>
				    </td>
				                    
				    <td>
				        {% if upcoming.collaborator_skill1 and upcoming.collaborator_skill1 != ""%}	
				           {{ upcoming.collaborator_skill1 }}
				        {% endif %}
				        {% if upcoming.collaborator_skill2 and upcoming.collaborator_skill2 != ""%}	
				           &nbsp{{ upcoming.collaborator_skill2 }}
				        {% endif %}
				        {% if upcoming.collaborator_skill3 and upcoming.collaborator_skill3 != ""%}	
				           &nbsp{{ upcoming.collaborator_skill3 }}
				        {% endif %}
				        {% if upcoming.collaborator_skill4 and upcoming.collaborator_skill4 != ""%}	
				           &nbsp{{ upcoming.collaborator_skill4 }}
				        {% endif %}
				        {% if upcoming.collaborator_skill5 and upcoming.collaborator_skill5 != ""%}	
				           &nbsp{{ upcoming.collaborator_skill5 }}
				        {% endif %}
				        {% if upcoming.collaborator_skill6 and upcoming.collaborator_skill6 != ""%}	
				           &nbsp{{ upcoming.collaborator_skill6 }}
				        {% endif %}
				        {% if upcoming.collaborator_skill7 and upcoming.collaborator_skill7 != ""%}	
				           &nbsp{{ upcoming.collaborator_skill7 }}
				        {% endif %}
				        {% if upcoming.collaborator_skill8 and upcoming.collaborator_skill8 != ""%}	
				           &nbsp{{ upcoming.collaborator_skill8 }}
				        {% endif %}
				        {% if upcoming.collaborator_skill9 and upcoming.collaborator_skill9 != ""%}	
				           &nbsp{{ upcoming.collaborator_skill9 }}
				        {% endif %}
				        {% if upcoming.collaborator_skill10 and upcoming.collaborator_skill10 != ""%}	
				           &nbsp{{ upcoming.collaborator_skill10 }}
	           			{% endif %}
					</td>
				                      
				</tr>

			</table>

			<div id="toggleUpcoming" onclick="toggleUpcoming()" class="show-link"> Show More </div>

            <div id="upcoming-more">

				<table width="750">
					<tr>
						<td width="50"></td>
						<td valign="top">
						    <div class="tableLabel">
						       Start date: 
						    </div>
						</td>
						                    
						<td>
						    {{upcoming.targetstartdate | date:'Y-m-d'}}
						</td>

						<td valign="top">
						    <div class="tableLabel">
						       End date: 
						    </div>
						</td>
						                    
						<td>
						    {{upcoming.targetfinishdate | date:'Y-m-d'}}
						</td>
					                      
					</tr>     
				</table>

				<table width="750">
					<tr>
						<td width="50"></td>
						<td valign="top" class="tableTitle">
						    <div class="tableLabel">
						       Frequency of work: 
						    </div>
						</td>
						                    
						<td>
							{{upcoming.often}}
						</td>
					                      
					</tr>  

					<tr>
						<td width="50"></td>
						<td valign="top" class="tableTitle">
						    <div class="tableLabel">
						       What I will offer: 
						    </div>
						</td>
						                    
						<td>
							{% if upcoming.give_back == 1 %}
					        Paid compensation
					        {% endif %}

					        {% if upcoming.give_back == 2 %}
					        Exchange  of skills/services
					        {% endif %}

					        {% if upcoming.give_back == 3 %}
					        Negotiable
					        {% endif %}
						</td>
					                      
					</tr>     

					<tr>
						<td width="50"></td>
						<td valign="top" class="tableTitle">
						    <div class="tableLabel">
						       Comment: 
						    </div>
						</td>
						                    
						<td>
							{{upcoming.comment}}
						</td>
					                      
					</tr>  

				</table>

				<h4 align="center" class="tableLabel">Funding Status</h4>
				<table width="750">
		            <tr>
						<td width="50"></td>
						<td valign="top" class="tableTitle">
						    <div class="tableLabel">
						       Funding I'm seeking: 
						    </div>
						</td>
						                    
						<td>
							{{upcoming.fund}}
						</td>
					                      
					</tr>    
					<tr>
						<td width="50"></td>
						<td valign="top" class="tableTitle">
						    <div class="tableLabel">
						       Comment: 
						    </div>
						</td>
						                    
						<td>
							{{upcoming.comment_help}}
						</td>
					                      
					</tr>  

				</table>
				 <div id="toggleOffUpcoming" onclick="toggleUpcoming()" class="show-link"> Show Less </div>
			</div>


        <hr class="divider"/>

        <div id="upcomingLike" class="popupLike"></div> 
        <!--div class="popupLike" onclick="popLike()"><button onclick="likeFunction(2, 1)">Like</button></br><span class="popuptextLike" id="likePop">You Liked it</br></span></div-->
 		<div class="popupShare" onclick="shareFunction(2, 1)"> Share &nbsp <span class="popuptextShared" id="sharedPop">Shared!</br></span></div>
		<div class="popupHatsoff" id="hatsoffstatus_upcoming"><img src="{% static 'images/2hats-01.png'%}" class="icons-img" onclick="hatsoffFunction(2, 1)"></div>
	    <!--div class="popupThanks" onclick="popThanks()">Thanks</br><span class="popuptextThanks" id="thanksPop">Give a thanks?</br><button onclick="thanksFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">No</button></span></div><div class="popupGave"><span class="popuptextGave" id="gavePop">Gave a Thanks!</span></div-->
		<!--div class="popupFollow" onclick="followFunction()">Follow &nbsp</br><span class="popuptextFollow" id="followPop">Following</br></span></div-->
        <div class="popupCollaborate" onclick="collaborateFunction(2, 1)"><button class="collaborate-btn">Collaborate &nbsp</button><span class="popuptextCollaborate" id="collaboratePop">Collaborated</br></span></div>



        <div class="comment-container">
           <div class="well well-ssm">
	            <ul id="upcomingComment" style="list-style-type:none;">
	            	
	            </ul>

	            <form class="form-horizontal" action="">
	                <div class="form-group">
	                    <div class="col-md-15">
	                    	<textarea class="form-control" id="c_upcoming" autocomplete="off" name="message" placeholder="Please enter your comment here..." rows="3" style="width:520px;"></textarea>
	                    </div>
	                </div>
	                <div class="form-group">
	                    <div class="col-md-12 text-right">
	                    	<button class="btn btn-primary btn-lg" onclick="return submitUpcomingComment()">Post</button>
	                	</div>
	            	</div>
	            </form>

            </div>
        </div>

	    {% else %}
			<table width="750">
	            <tr>
					<td width="50"></td>
					<td valign="top" class="tableTitle">
					    <div class="tableLabel">
					       Title: 
					    </div>
					</td>
					                    
					<td>
					</td>
				                      
				</tr>     

				<tr>
				    <td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				            Description: 
				        </div>
				    </td>
				                    
				    <td>
				    </td>
				                      
				</tr>

				<tr>
				    <td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				            Your role: 
				        </div>
				    </td>
				                    
				    <td>
				    </td>
				                      
				</tr>

				<tr>
				    <td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				        	Status:
				        </div>
				    </td>
				                    
				    <td>
					</td>
				                      
				</tr>

				<tr>
					<td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				        	Keywords:
				        </div>
				    </td>
				                    
				    <td>
					</td>
				</tr>
			</table>

			<h4 align="center" class="tableLabel">Collaborators I'd love!</h4>
			<table width="750">
	            <tr>
					<td width="50"></td>
					<td valign="top" class="tableTitle">
					    <div class="tableLabel">
					       Collaborators: 
					    </div>
					</td>
					                    
					<td>
					</td>
				                      
				</tr>     

				<tr>
				    <td width="50"></td>
				    <td valign="top" class="tableTitle">
				        <div class="tableLabel">
				        	Skills:
				        </div>
				    </td>
				                    
				    <td>
					</td>
				                      
				</tr>

			</table>

			<table width="750">
				<tr>
					<td width="50"></td>
					<td valign="top">
					    <div class="tableLabel">
					       Start date: 
					    </div>
					</td>
					                    
					<td>
					</td>

					<td valign="top">
					    <div class="tableLabel">
					       End date: 
					    </div>
					</td>
					                    
					<td>
					</td>
				                      
				</tr>     
			</table>

			<table width="750">
				<tr>
					<td width="50"></td>
					<td valign="top" class="tableTitle">
					    <div class="tableLabel">
					       Frequency of work: 
					    </div>
					</td>
					                    
					<td>
					</td>
				                      
				</tr>  

				<tr>
					<td width="50"></td>
					<td valign="top" class="tableTitle">
					    <div class="tableLabel">
					       What I will offer: 
					    </div>
					</td>
					                    
					<td>
					</td>
				                      
				</tr>     

				<tr>
					<td width="50"></td>
					<td valign="top" class="tableTitle">
					    <div class="tableLabel">
					       Comment: 
					    </div>
					</td>
					                    
					<td>
					</td>
				                      
				</tr>  

			</table>

			<h4 align="center" class="tableLabel">Funding Status</h4>
			<table width="750">
	            <tr>
					<td width="50"></td>
					<td valign="top" class="tableTitle">
					    <div class="tableLabel">
					       Funding I'm seeking: 
					    </div>
					</td>
					                    
					<td>
					</td>
				                      
				</tr>    
				<tr>
					<td width="50"></td>
					<td valign="top" class="tableTitle">
					    <div class="tableLabel">
					       Comment: 
					    </div>
					</td>
					                    
					<td>
					</td>
				                      
				</tr>  

			</table>

	    {% endif %}

 
	</div>

	<script src="{{nodejs_url}}/socket.io/socket.io.js"></script>
	<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="{% static 'js/basic.js' %}"></script>
	<script>
	      socket.emit('join message', {uid:{{user.id}}, firstname:"{{user.first_name}}", lastname:"{{user.last_name}}"});
	      socket.emit('at userpage', {uid:{{user.id}}, to_uid:{{t_user.id}}, uname:"{{user.first_name}}"});

	      /*
	      socket.on('number user thanks', function(count){
                  document.getElementById("thanksNum").innerHTML = count;
              });

	      socket.on('number user hatsoff', function(count){
                  document.getElementById("hatsoffNum").innerHTML = count;
              });

	      socket.on('number user follow', function(count){
                  document.getElementById("followNum").innerHTML = count;
              });
          */

	      var users = [{% for u in users %} {{ u }} ,{% endfor %}];
          var photos = [{% for p in userphoto %}"{{ p }}", {% endfor %}];

          var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

		 $(function(){
			$(".addClass").click(function () {
		        $('#qnimate').addClass('popup-box-on');
		    });
		          
		    $("#removeClass").click(function () {
		        $('#qnimate').removeClass('popup-box-on');
		    });
		  })

		  function toggleUpcoming()
          {
            console.log("toggle");

            var status = document.getElementById("upcoming-more").style.display; 

            console.log("status is "+status);

            if (status == "none" || status == "") {
                document.getElementById("upcoming-more").style.display = "block";
                document.getElementById("toggleUpcoming").innerText = "";
            } else if (status == "block") {
                document.getElementById("upcoming-more").style.display = "none";
                document.getElementById("toggleUpcoming").innerText = "Show More";
            }
          }

		  function defaultMessage(c_type){
		    $('#qnimate').addClass('popup-box-on');
		    if (c_type == 1){//launch chat
		    	document.getElementById('status_message').value = '';
		    }else if(c_type == 2){//pitch
		    	document.getElementById('status_message').value = 'Hello, I have a project I would like to pitch to you.';
		    }
		  }


		  /*
		  function addCommunityFunction(send_uid, recieve_uid){
			console.log("add community");
			socket.emit('add community members', {sid:send_uid, rid:recieve_uid});
			document.getElementById('add-request').innerHTML = "Request sent";
			document.getElementById('add-request').setAttribute("onclick", "");
		  }
		  */

	      function likeFunction(c_type, c_id){
		    console.log('uid on like:'+c_type+':'+c_id);

		    //popLike();
            if (c_type == 2){
			    socket.emit('like upcoming', {to_uid:{{t_user.id}}, uid:{{user.id}}, c_id:c_id});
			    console.log('like upcoming');
			    //<img src="{% static 'images/hat.png'%}" class="icons-img">
			    document.getElementById("upcomingLike").innerHTML = '<div class="popupLike" onclick="popLike()"><img src="{% static 'images/thumbsUp-01.png'%}" class="icons-img" onclick="unlikeFunction(2, 1)" /></br><span class="popuptextLike" id="likePop">You Unliked it</br></span></div>';
            }else if (c_type == 3){
			    socket.emit('like portfolio', {to_uid:{{t_user.id}}, uid:{{user.id}}, c_id:c_id});
			    console.log('like portfolio');
			    document.getElementById("portfolioLike_"+c_id).innerHTML = '<div class="popupLike" onclick="popLike()"><img src="{% static 'images/thumbsUp-01.png'%}" class="icons-img" onclick="unlikeFunction(3, '+c_id+')" /></br><span class="popuptextLike" id="likePop">You Unliked it</br></span></div>';
            }
		 //socket.emit('like community', {to_uid:uid, uid:{{user.id}}, c_id:c_id});
	      }

	      function unlikeFunction(c_type, c_id){
		    console.log('uid on like:'+c_type+':'+c_id);

		    //popLike();
            if (c_type == 2){
			    socket.emit('unlike upcoming', {to_uid:{{t_user.id}}, uid:{{user.id}}, c_id:c_id});
			    console.log('unlike upcoming');
			    document.getElementById("upcomingLike").innerHTML = '<div class="popupLike" onclick="popLike()"><img src="{% static 'images/thumbsUp-02.png'%}" class="icons-img" onclick="likeFunction(2, 1)" /></br><span class="popuptextLike" id="likePop">You Liked it</br></span></div>';
            }else if (c_type == 3){
			    socket.emit('unlike portfolio', {to_uid:{{t_user.id}}, uid:{{user.id}}, c_id:c_id});
			    console.log('unlike portfolio');
			    document.getElementById("portfolioLike_"+c_id).innerHTML = '<div class="popupLike" onclick="popLike()"><img src="{% static 'images/thumbsUp-02.png'%}" class="icons-img" onclick="likeFunction(3, '+c_id+')"></br><span class="popuptextLike" id="likePop">You Liked it</br></span></div>';
            }
		 //socket.emit('like community', {to_uid:uid, uid:{{user.id}}, c_id:c_id});
	      }

	      function popLike(){

		    var popHatsoff = document.getElementById("hatsoffPop");
			if(popHatsoff != null){
			 	popHatsoff.style.visibility = "hidden";
			}

			var popFollow = document.getElementById("followPop");
			if(popFollow != null){
			 	popFollow.style.visibility = "hidden";
			}

			var popShared = document.getElementById("sharedPop");
			if(popShared != null){
			 	popShared.style.visibility = "hidden";
			}

			var popup = document.getElementById('likePop');
			popup.style.visibility = "visible";
			//popup.classList.toggle('show');
	      }

	      function popShare(){
			 var popup = document.getElementById('sharePop');
			 popup.classList.toggle('show');
	      }

	      function shareFunction(c_type, c_id){
			 console.log('uid on share:'+c_type+':'+c_id);

			 //popShared();
             if (c_type == 2){
		         socket.emit('share upcoming', {to_uid:{{t_user.id}}, uid:{{user.id}}, c_id:c_id});
             }else if (c_type == 3){
		         socket.emit('share portfolio', {to_uid:{{t_user.id}}, uid:{{user.id}}, c_id:c_id});
             }
		 //socket.emit('share upcoming', {to_uid:uid, uid:{{user.id}}, c_id:c_id});
	      }

	      function popShared(){
	      	 var popHatsoff = document.getElementById("hatsoffPop");
			 if(popHatsoff != null){
			 	popHatsoff.style.visibility = "hidden";
			 }

			 var popFollow = document.getElementById("followPop");
			 if(popFollow != null){
			 	popFollow.style.visibility = "hidden";
			 }

			 var popLike = document.getElementById("likePop");
			 if(popLike != null){
			 	popLike.style.visibility = "hidden";
			 }

			 var popup = document.getElementById('sharedPop');
			 console.log("popup shared!");
			 popup.style.visibility = "visible";
			 //popup.classList.toggle('show');
	      }

	      function popThanks(){
			 var popup = document.getElementById('thanksPop');
			 popup.classList.toggle('show');
	      }

	      function thanksFunction(){
			 console.log('thanks!');
			 popGave();
			 socket.emit('give thanks', {to_uid:{{t_user.id}}, uid:{{user.id}}});
			 console.log('thanks!');
	      }

	      function popGave(){
			 var popup = document.getElementById('gavePop');
			 popup.classList.toggle('show');
	      }

          /*
	      function popHatsoff(){
			 var popup = document.getElementById('hatsoffPop');
			 popup.classList.toggle('show');
	      }
	      */

	      function hatsoffFunction(c_type, c_id){
			 console.log('hatsoff!', c_type);
			 socket.emit('give hatsoff', {to_uid:{{t_user.id}}, uid:{{user.id}}, content_type:c_type, content_id:c_id});

             if(c_type == 2){//upcoming
                var elemprofile = document.getElementById("hatsoffstatus_upcoming");
                elemprofile.innerHTML = '';
                $('#hatsoffstatus_upcoming').append($('<img src="{% static 'images/2hats-02.png'%}" class="icons-img" onclick="unhatsoffedFunction(2, 1)">'));
             }else if(c_type == 3){//portflio
                var elemprofile = document.getElementById("hatsoffstatus_portfolio_"+c_id);
                if(elemprofile){
                    elemprofile.innerHTML = '';
                    $('#hatsoffstatus_portfolio_'+c_id).append($('<div class="popupHatsoff" onclick="unhatsoffedFunction(3, '+c_id+')"><img src="{% static 'images/2hats-02.png'%}" class="icons-img"></div>'));
                }
             }else if(c_type == 5){
             }
	      }

          function unhatsoffFunction(c_type, c_id){
             console.log('unhatsoff!', c_type);
             socket.emit('give unhatsoff', {to_uid:{{t_user.id}}, uid:{{user.id}}, content_type:c_type, content_id:c_id});

             if(c_type == 2){
                var elemprofile = document.getElementById("hatsoffstatus_upcoming");
                elemprofile.innerHTML = '';
                $('#hatsoffstatus_upcoming').append($('<div class="popupHatsoff" onclick="hatsoffedFunction(2, 1)"><img src="{% static 'images/2hats-01.png'%}" class="icons-img"></div>'));
             }else if(c_type == 3){
                var elemprofile = document.getElementById("hatsoffstatus_portfolio_"+c_id);
                if(elemprofile){
                    elemprofile.innerHTML = '';
                    $('#hatsoffstatus_portfolio_'+c_id).append($('<div class="popupHatsoff" onclick="hatsoffedFunction(3, '+c_id+')"><img src="{% static 'images/2hats-01.png'%}" class="icons-img"></div>'));
                }
             }else if(c_type == 5){
             }
          }

	      function popGavehatsoff(){
	      	 console.log("popup hatsoff");

			 var popFollow = document.getElementById("followPop");
			 if(popFollow != null){
			 	popFollow.style.visibility = "hidden";
			 }

			 var popShared = document.getElementById("sharedPop");
			 if(popShared != null){
			 	popShared.style.visibility = "hidden";
			 }

			 var popLike = document.getElementById("likePop");
			 if(popLike != null){
			 	popLike.style.visibility = "hidden";
			 }

			 var popup = document.getElementById('hatsoffPop');
			 popup.style.visibility = "visible";
			 //popup.classList.toggle('show');
	      }

	      function hatsoffedFunction(){
			 console.log('hatsoff!');
			 popGavehatsoff();
		  }

		  /*
	      function popFollow(){
			 var popup = document.getElementById('followPop');
			 popup.classList.toggle('show');
	      }
	      */

	      function followFunction(){
			 console.log('follow!');

			 popFollowed();
		     socket.emit('give follow', {to_uid:{{t_user.id}}, uid:{{user.id}}});

		  	 var count = parseInt(document.getElementById("followNum").innerHTML);
             if(!isNaN(count)){
             	count += 1;
             }
		     var elemprofile = document.getElementById("follow-profile");
		  	 var elem = document.getElementsByClassName("followstatus");
		  	 elemprofile.innerHTML = '';

		  	 for(var i = 0; i < elem.length; i++){
		  	 	elem[i].innerHTML = '';
		  	 }
		  	 $('.followstatus').append($('<div class="following"><span>Following &nbsp<span></div>'));
		  	 $('#follow-profile').append($('<div class="following">Following &nbsp</div><span id="followNum">'+count+'</span>'));
	      }

	      function popFollowed(){
	      	 var popHatsoff = document.getElementById("hatsoffPop");
			 if(popHatsoff != null){
			 	popHatsoff.style.visibility = "hidden";
			 }

			 var popShared = document.getElementById("sharedPop");
			 if(popShared != null){
			 	popShared.style.visibility = "hidden";
			 }

			 var popLike = document.getElementById("likePop");
			 if(popLike != null){
			 	popLike.style.visibility = "hidden";
			 }

			 var popup = document.getElementById('followPop');
			 popup.style.visibility = "visible";
			 //popup.classList.toggle('show');
	      }

	      function collaborateFunction(c_type, c_id){
            console.log('uid on like:'+c_type+':'+c_id);
            //popCollaborate();
            socket.emit('give collaborate', {to_uid:{{t_user.id}}, uid:{{user.id}}, c_id:c_id, c_type:c_type});
		    $('#qnimate').addClass('popup-box-on');
		    document.getElementById('status_message').value = 'Hello I\'m interested in Collaborating.';
          }

          /*
          function popCollaborate(){
            var popup = document.getElementById('collaboratePop');
            popup.classList.toggle('show');
          }
          */

          // For portfolio
		  function submitShowcaseComment(number){
            console.log('form submit portfolio'+number);
            var post_val = $('#c_portfolio_'+number).val();
                    
            if (post_val.length != 0){
                console.log('if:'+number+':'+post_val);
		        socket.emit('portfolio comment', {msg:post_val, to:{{t_user.id}}, p_id:number, uid:{{user.id}} });
            }
		    $('#c_portfolio_'+number).val('');
		    return false;
          }

          function submitUpcomingComment(){
            console.log('form submit upcoming');
            var post_val = $('#c_upcoming').val();
                    
            if (post_val.length != 0){
                console.log('if:'+post_val);
		        socket.emit('upcoming comment', {msg:post_val, to:{{t_user.id}}, uid:{{user.id}} });
            }
		    $('#c_upcoming').val('');
		    return false;
          }

          function submitComment(uid, c_id){
            console.log('form submit comment'+c_id);
            var post_val = $('#c_'+c_id).val();
                    
            if (post_val.length != 0){
              console.log('comment:'+post_val);
              socket.emit('community comment', {msg:post_val, user:{{user.id}}, c_id:c_id});
	          var m  = users.indexOf({{user.id}});
	          var url_link = "{% url 'week1:get_profile' user.id %}";
	          if (m != -1){
	              $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[m]+'" class="profile_img">'+'{{user.firstname}}'+'&nbsp'+'{{user.last_name}}'+'</a>&nbsp</br><p>'+post_val+'</p>'));
	          }else{
	              $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png'%}" class="profile_img">'+'{{user.firstname}}'+'&nbsp'+'{{user.last_name}}'+'</a>&nbsp</br><p>'+post_val+'</p>'));
	          }
            }
            $('#c_'+c_id).val('');
            return false;
          } 

          function sendMessage(){
            console.log('send message');
            var post_val = $('#status_message').val();
                    
            if (post_val.length != 0){
                console.log('if:'+post_val);
                var files = document.getElementById('image_in_message').files;
	            var file = files[0];

	            var data = {};

	            if (file){
	              data = {'file':file, 'fileName':file.name, 'type':file.type};
	              document.getElementById('image_in_message').value = "";
	            }
		        socket.emit('send message', {msg:post_val, to_uid:{{t_user.id}}, uid:{{user.id}}, data:data});
            }
		    $('#status_message').val('');
		    return false;
          }

          function getMessage(){
            console.log('get message');
		    //socket.emit('get message', { to:{{t_user.id}}, uid:{{user.id}} });
          }

          // content_type 1:community post 2:upcoming work 3:portfolio 4:shared post
          socket.on('like status', function(data){
          	console.log("data", data);
          	var upcoming = false;
          	var portfolios = [];
          	if (data){
          		for (var i = 0; i < data.length; i++){
          			var doc = data[i];
          			var content_type = doc['content_type'];
          			if (content_type == 2){
          				document.getElementById("upcomingLike").innerHTML = '<div class="popupLike" onclick="popLike()"><img src="{% static 'images/thumbsUp-01.png'%}" class="icons-img" onclick="unlikeFunction(2, 1)"></br><span class="popuptextLike" id="likePop">You Unliked it</br></span></div>';
          				upcoming = true; 
          			}
          			console.log("content_type:", content_type);
          			if (content_type == 3){
          				var p_id = parseInt(doc['content_id']);
          				document.getElementById("portfolioLike_"+p_id).innerHTML = '<div class="popupLike" onclick="popLike()"><img src="{% static 'images/thumbsUp-01.png'%}" class="icons-img" onclick="unlikeFunction(3, '+p_id+')"></br><span class="popuptextLike" id="likePop">You Unliked it</br></span></div>';
          				portfolios.push(p_id);
          			}
          		}
          	}

          	if(upcoming == false){
          		var upcomingElement = document.getElementById("upcomingLike");
          		if (upcomingElement != null){
          			upcomingElement.innerHTML = '<div class="popupLike" onclick="popLike()"><img src="{% static 'images/thumbsUp-02.png'%}" class="icons-img" onclick="likeFunction(2, 1)"></br><span class="popuptextLike" id="likePop">You Liked it</br></span></div>';

          		}
          	}

          	var p_count = $('[id^=portfolioLike_]').length;
          	for (var i = 0; i < p_count; i++){
          		var counter = i+1;
          		if (portfolios.indexOf(counter) == -1){
          			document.getElementById("portfolioLike_"+counter).innerHTML = '<div class="popupLike" onclick="popLike()"><img src="{% static 'images/thumbsUp-02.png'%}" class="icons-img" onclick="likeFunction(3, '+counter+')"></br><span class="popuptextLike" id="likePop">You Liked it</br></span></div>';
          		}	
          	}
          });

          socket.on('new hatsoff userpage', function(){
             var count = parseInt(document.getElementById("hatsoffNum").innerHTML);
             if(!isNaN(count)){
             	document.getElementById("hatsoffNum").innerHTML = count+1;
             }
          });

		  socket.on('set message', function(data){
            console.log('set message');
            console.log(data['_id']);

            if(data){
            	if(data['messages']){
            		for (var i=0; i < data['messages'].length; i++){
            			if (data['messages'][i]['content']){
            				var doc = data['messages'][i];
			   				var n  = users.indexOf(doc['uid']);
			   				var imageText = '';

	                        if (doc['image'] && doc['image']['data']){
		                        var bytes = new Uint8Array(doc['image']['data']['data']);
		                        var ctype = doc['image']['contentType'];
		                        var enc = encode(bytes);
		                        imageText = '<embed id="Image_in_'+doc['_id']+'" src="data:'+ctype+';base64,'+enc+'" class="popupmessageImage" ></embed>';
	                      	}

            				if(data['messages'][i]['uid'] == {{user.id}}){
            					if (n != -1){
            						$('#chat_room').append($('<div class="chat-box-single-line"><abbr class="timestamp">October 9th, 2016</abbr></div><div class="direct-chat-msg doted-border"><div class="direct-chat-info clearfix"><span class="direct-chat-name pull-right">You</span></div><img alt="iamgurdeeposahan" src="{{media_url}}'+photos[n]+'" class="direct-chat-img"><div class="direct-chat-text">'+data['messages'][i]['content']+'</div>'+imageText+'<div class="direct-chat-info clearfix"><span class="direct-chat-timestamp pull-right">3.36 PM</span></div></div>'));
            					}else{
            						$('#chat_room').append($('<div class="chat-box-single-line"><abbr class="timestamp">October 9th, 2016</abbr></div><div class="direct-chat-msg doted-border"><div class="direct-chat-info clearfix"><span class="direct-chat-name pull-right">You</span></div><img alt="iamgurdeeposahan" src="{% static 'images/profileimage.png' %}" class="direct-chat-img"><div class="direct-chat-text">'+data['messages'][i]['content']+'</div>'+imageText+'<div class="direct-chat-info clearfix"><span class="direct-chat-timestamp pull-right">3.36 PM</span></div></div>'));

            					}
            				}else if(data['messages'][i]['uid'] == {{t_user.id}}){
            					if ( n != -1){
            						$('#chat_room').append($('<div class="chat-box-single-line"><abbr class="timestamp">October 9th, 2016</abbr></div><div class="direct-chat-msg doted-border"><div class="direct-chat-info clearfix"><span class="direct-chat-name pull-left">{{t_user.first_name}}&nbsp{{t_user.last_name}}'+'</span></div><img alt="iamgurdeeposahan" src="{{media_url}}'+photos[n]+'" class="direct-chat-img"><div class="direct-chat-text">'+data['messages'][i]['content']+'</div><div class="direct-chat-info clearfix"><span class="direct-chat-timestamp pull-left">3.36 PM</span></div></div>'));
            					}else{
            						$('#chat_room').append($('<div class="chat-box-single-line"><abbr class="timestamp">October 9th, 2016</abbr></div><div class="direct-chat-msg doted-border"><div class="direct-chat-info clearfix"><span class="direct-chat-name pull-left">{{t_user.first_name}}&nbsp{{t_user.last_name}}'+'</span></div><img alt="iamgurdeeposahan" src="{% static 'images/profileimage.png' %}" class="direct-chat-img"><div class="direct-chat-text">'+data['messages'][i]['content']+'</div><div class="direct-chat-info clearfix"><span class="direct-chat-timestamp pull-left">3.36 PM</span></div></div>'));
            					}
            				}
            			}

            		}

            	}

            }

		  });

		  socket.on('follow status', function(data){
		  	var elemprofile = document.getElementById("follow-profile");
		  	var elem = document.getElementsByClassName("followstatus");
		  	elemprofile.innerHTML = '';
		  	elem.innerHTML = '';
		  	if(data.status == 2){
		  		$('.followstatus').append($('<div class="following"><span>Following &nbsp<span></div>'));
		  		$('#follow-profile').append($('<div class="following">Following &nbsp</div><span id="followNum">'+data.count+'</span>'));
				document.getElementById('add-request').innerHTML = "Community member";
				document.getElementById('add-request').setAttribute("onclick", "");
		  	}else if(data.status == 1){
		  		$('.followstatus').append($('<div class="following"><span>Following &nbsp<span></div>'));
		  		$('#follow-profile').append($('<div class="following">Following &nbsp</div><span id="followNum">'+data.count+'</span>'));
				document.getElementById('add-request').innerHTML = "Request sent";
				document.getElementById('add-request').setAttribute("onclick", "");
		  		//var str = '<span class="following">Following</span><span id="followNum">'+data.count+'</span>';
				//elem.insertAdjacentHTML('beforeend', str);
		  	}else if(data.status == 11){
		  		$('.followstatus').append($('<div class="popupFollow" onclick="addCommunityFunction('+{{t_user.id}}+')">Confirm request &nbsp</div>'));
		  		$('#follow-profile').append($('<div class="popupFollow" onclick="addCommunityFunction('+{{t_user.id}}+')">Confirm request &nbsp<span id="followNum">'+data.count+'</span></div>'));
				document.getElementById('add-request').innerHTML = "Confirm request";
		  	}else{
		  		$('.followstatus').append($('<div class="popupFollow" onclick="addCommunityFunction('+{{t_user.id}}+')">Add &nbsp</div>'));
		  		$('#follow-profile').append($('<div class="popupFollow" onclick="addCommunityFunction('+{{t_user.id}}+')">Add &nbsp<span id="followNum">'+data.count+'</span></div>'));
				//var str = '<div class="popupFollow" onclick="followFunction()">Follow &nbsp<span class="popuptextFollow" id="followPop">Following</span><span id="followNum">'+data.count+'</span></div>';
				//elem.insertAdjacentHTML('beforeend', str);
		  	}
		  });

		  socket.on('hatsoff status', function(data){
		  	var docs = data.docs;
		  	var count = data.count;
		  	var len = docs.length;
		  	var flag1 = false;
		  	var flag2 = false;
		  	var flag3 = false;
		  	var flag4 = false;
		  	var flag5 = false;
		  	var p_list = [];
		  	for (var i = 0; i < 10; i++){
		  		p_list.push(false);
		  	}

		  	for (var i = 0; i < len; i++){
		  		if(docs[i]['content_id'] && docs[i]['content_type']){
		  			var c_id = docs[i]['content_id'];
		  			var c_type = docs[i]['content_type'];
		  			if(c_type == 1){//community post

		  			}else if(c_type == 2){//upcoming work
		  				var elemprofile = document.getElementById("hatsoffstatus_upcoming");
                        if (elemprofile){
                            elemprofile.innerHTML = '';
                            $('#hatsoffstatus_upcoming').append($('<div class="popupHatsoff" onclick="unhatsoffedFunction(2, 1)"><img src="{% static 'images/2hats-02.png'%}" class="icons-img"></div>'));
                        }
				  		flag2 = true;

		  			}else if(c_type == 3){//portfolio
		  				var c = parseInt(c_id);
			            if(!isNaN(c)){
		  					var elemprofile = document.getElementById("hatsoffstatus_portfolio_"+c);
		  					if(elemprofile){
			  					elemprofile.innerHTML = '';
					  			$('#hatsoffstatus_portfolio_'+c).append($('<div class="popupHatsoff" onclick="unhatsoffedFunction(3, '+c+')"><img src="{% static 'images/2hats-02.png'%}" class="icons-img"></div>'));
					  			p_list[c-1] = true;
		  					}
			            }
				  		flag3 = true;

		  			}else if(c_type == 4){//shared post

		  			}else if(c_type == 5){//profile
		  				var elemprofile = document.getElementById("hatsoff-profile");
		  				elemprofile.innerHTML = '';
				  		$('#hatsoff-profile').append($('<div class="popupHatsoff" onclick="unhatsoffedFunction(5, 1)"><img src="{% static 'images/2hats-02.png'%}" class="icons-img"><span id="hatsoffNum">'+count+'</span></div>'));
				  		flag5 = true;
		  			}
		  				
		  		}	
		  	}

		  	if(flag2 == false){
		  		var elemprofile = document.getElementById("hatsoffstatus_upcoming");
		  		if(elemprofile){
		  			elemprofile.innerHTML = '';
		  			$('#hatsoffstatus_upcoming').append($('<div class="popupHatsoff" onclick="hatsoffFunction(5, 1)"><img src="{% static 'images/2hats-01.png'%}" class="icons-img"></div>'));

		  		}
		  	}

		  	//flag3
		  	for (var i = 0; i < 10; i++){
		  		if (p_list[i] == false){
		  			var c = i+1;
		  			var elemprofile = document.getElementById("hatsoffstatus_portfolio_"+c);
		  			if (elemprofile){
		  				elemprofile.innerHTML = '';
				  		$('#hatsoffstatus_portfolio_'+c).append($('<div class="popupHatsoff" onclick="hatsoffFunction(\''+3+'\',\''+c+'\')"><img src="{% static 'images/2hats-01.png'%}" class="icons-img"></br></div>'));

		  			}

		  		}
		  	}

		  	if(flag5 == false){
		  		var elemprofile = document.getElementById("hatsoff-profile");
		  		elemprofile.innerHTML = '';
		  		$('#hatsoff-profile').append($('<div class="popupHatsoff" onclick="hatsoffFunction(5, 1)"><img src="{% static 'images/2hats-01.png'%}" class="icons-img"><span id="hatsoffNum">'+count+'</span></div>'));
		  	}
		  });

		  socket.on('new message', function(data){
            console.log('new message');

			var n  = users.indexOf(data.uid);

			var imageText = '';

            if (data.image && data.image['file'] && data.image['type']){
              var bytes = new Uint8Array(data.image['file']);
              var ctype = data.image['type'];
              var enc = encode(bytes);
              var countImg = $('[id^=Image_in_]').length;
              imageText = '<embed id="Image_in_'+countImg+'" src="data:'+ctype+';base64,'+enc+'" class="popupmessageImage" ></embed>';
            }

            if(data.uid == {{user.id}}){
            	if (n != -1){
            		$('#chat_room').append($('<div class="chat-box-single-line"><abbr class="timestamp">October 9th, 2015</abbr></div><div class="direct-chat-msg doted-border"><div class="direct-chat-info clearfix"><span class="direct-chat-name pull-right">You</span></div><img alt="iamgurdeeposahan" src="{{media_url}}'+photos[n]+'" class="direct-chat-img"><div class="direct-chat-text">'+data.content+'</div>'+imageText+'<div class="direct-chat-info clearfix"><span class="direct-chat-timestamp pull-right">3.36 PM</span></div></div>'));
            	}else{
            		$('#chat_room').append($('<div class="chat-box-single-line"><abbr class="timestamp">October 9th, 2015</abbr></div><div class="direct-chat-msg doted-border"><div class="direct-chat-info clearfix"><span class="direct-chat-name pull-right">You</span></div><img alt="iamgurdeeposahan" src="{% static 'images/profileimage.png' %}" class="direct-chat-img"><div class="direct-chat-text">'+data.content+'</div>'+imageText+'<div class="direct-chat-info clearfix"><span class="direct-chat-timestamp pull-right">3.36 PM</span></div></div>'));

            	}

            }else if(data.uid == {{t_user.id}}){
            	if (n != -1){
	            	$('#chat_room').append($('<div class="chat-box-single-line"><abbr class="timestamp">October 9th, 2016</abbr></div><div class="direct-chat-msg doted-border"><div class="direct-chat-info clearfix"><span class="direct-chat-name pull-left">'+'{{t_user.first_name}}&nbsp{{t_user.last_name}}'+'</span></div><img alt="iamgurdeeposahan" src="{{media_url}}'+photos[n]+'" class="direct-chat-img"><div class="direct-chat-text">'+data.content+'</div>'+imageText+'<div class="direct-chat-info clearfix"><span class="direct-chat-timestamp pull-left">3.36 PM</span></div></div>'));
            	}else{
	            	$('#chat_room').append($('<div class="chat-box-single-line"><abbr class="timestamp">October 9th, 2016</abbr></div><div class="direct-chat-msg doted-border"><div class="direct-chat-info clearfix"><span class="direct-chat-name pull-left">'+'{{t_user.first_name}}&nbsp{{t_user.last_name}}'+'</span></div><img alt="iamgurdeeposahan" src="{% static 'images/profileimage.png' %}" class="direct-chat-img"><div class="direct-chat-text">'+data.content+'</div>'+imageText+'<div class="direct-chat-info clearfix"><span class="direct-chat-timestamp pull-left">3.36 PM</span></div></div>'));
            	}

            }

		  });

	      socket.on('new portfolio comment', function(data){
            console.log('new portfolio comment on home');
		    var uid = data.from_uid;
            var p_id = data.p_id;
            console.log(p_id);
		    //var users = [{% for u in users %} {{ u }} ,{% endfor %}];
		    //var photos = [{% for p in userphoto %}"{{ p }}", {% endfor %}];
		    var n  = users.indexOf(uid);
		    var url_mask = "{% url 'week1:add_folder' user.id %}".replace({{user.id}}, uid);
		    var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
		    if ( n != -1) {
		          if (uid == {{user.id}}){
		             $('#portfolioComment_'+p_id).append($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+'</br><p>'+data.msg+'</p><br/><hr class="divider"/>'));
		          } else{
		             $('#portfolioComment_'+p_id).append($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+'&nbsp <a href="'+url_mask+'">folder</a></br><p>'+data.msg+'</p><br/><hr class="divider"/>'));
		          }

		    }else{
		          if (uid == {{user.id}}){
		             $('#portfolioComment_'+p_id).append($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png' %}" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+'</br><p>'+data.msg+'</p><br/><hr class="divider"/>'));
		          } else {
		             $('#portfolioComment_'+p_id).append($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png' %}" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+'&nbsp <a href="'+url_mask+'">folder</a></br><p>'+data.msg+'</p><br/><hr class="divider"/>'));
		          }
		    }
	      });

	      socket.on('update portfolio comment', function(docs){
            console.log('socket on portfolio comment:'+p_id);
		    //var users = [{% for u in users %} {{ u }} ,{% endfor %}];
		    //var photos = [{% for p in userphoto %}"{{ p }}", {% endfor %}];
	        for(var i = 0; i < docs.length; i++){
                if (docs[i]['p_id']) {
                    var p_id = docs[i]['p_id'];
                    console.log('If!');
		            if (docs[i]['user']['uid']){
						var uid = docs[i]['user']['uid'];
						var n  = users.indexOf(uid);
						var data = docs[i];
						var url_mask = "{% url 'week1:add_folder' user.id %}".replace({{user.id}}, uid);
						var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
				if ( n != -1) {
				      if (uid == {{user.id}}){
				         $('#portfolioComment_'+p_id).prepend($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+data['user']['first_name']+'&nbsp'+data['user']['last_name']+'</br><p>'+data['content']+'</p><br/><hr class="divider"/>'));
				      } else{
				         $('#portfolioComment_'+p_id).prepend($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+data['user']['first_name']+'&nbsp'+data['user']['last_name']+'&nbsp <a href="'+url_mask+'">folder</a></br><p>'+data['content']+'</p><br/><hr class="divider"/>'));
				      }

				}else{
				      if (uid == {{user.id}}){
				         $('#portfolioComment_'+p_id).prepend($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png' %}" class="profile_img"></a>'+data['user']['first_name']+'&nbsp'+data['user']['last_name']+'</br><p>'+data['content']+'</p><br/><hr class="divider"/>'));
				      } else {
				         $('#portfolioComment_'+p_id).prepend($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png' %}" class="profile_img"></a>'+data['user']['first_name']+'&nbsp'+data['user']['last_name']+'&nbsp <a href="'+url_mask+'">folder</a></br><p>'+data['content']+'</p><br/><hr class="divider"/>'));
				      }
				}
                          }

                      } else{
                          console.log('Else!');
                      }
	          }
	      });


	      //$('#upcoming_form').submit(function(){
          function submitUForm(){
            console.log('form submit');
            var com = $('#c_upcoming').val();
            if (com.length != 0){
		        socket.emit('upcoming comment', {msg:com, to:{{t_user.id}}, uid:{{user.id}}});
            }
		    $('#c_upcoming').val('');
		    return false;
	      }

	      socket.on('update upcoming comment', function(docs){
		    //var users = [{% for u in users %} {{ u }} ,{% endfor %}];
		    //var photos = [{% for p in userphoto %}"{{ p }}", {% endfor %}];
		    for(var i=0; i < docs.length; i++){
		       if (docs[i]['user']['uid']){
			    var uid = docs[i]['user']['uid'];
			    var n  = users.indexOf(uid);
			    var url_mask = "{% url 'week1:add_folder' user.id %}".replace({{user.id}}, uid);
			    var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
			    if ( n != -1) {
			       if (uid == {{user.id}}){
			     $('#upcomingComment').prepend($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+docs[i]['user']['first_name']+'&nbsp'+docs[i]['user']['last_name']+'</br><p>'+docs[i]['content']+'</p><br/><hr class="divider"/>'));
			       } else{
			     $('#upcomingComment').prepend($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+docs[i]['user']['first_name']+'&nbsp'+docs[i]['user']['last_name']+'&nbsp <a href="'+url_mask+'">folder</a></br><p>'+docs[i]['content']+'</p><br/><hr class="divider"/>'));
			       }
			    } else{
			       if (uid == {{user.id}}){
			     $('#upcomingComment').prepend($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png' %}" class="profile_img"></a>'+docs[i]['user']['first_name']+'&nbsp'+docs[i]['user']['last_name']+'</br><p">'+docs[i]['content']+'</p><br/><hr class="divider"/>'));
			       } else{
			     $('#upcomingComment').prepend($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png' %}" class="profile_img"></a>'+docs[i]['user']['first_name']+'&nbsp'+docs[i]['user']['last_name']+'&nbsp <a href="'+url_mask+'">folder</a></br><p>'+docs[i]['content']+'</p><br/><hr class="divider"/>'));
			       }
			    }
		       }
		    }
	     });

	     socket.on('new upcoming comment on userpage', function(data){
	     	console.log('new upcoming comment on userpage');
		    var uid = data.from_uid;
		    //var users = [{% for u in users %} {{ u }} ,{% endfor %}];
		    //var photos = [{% for p in userphoto %}"{{ p }}", {% endfor %}];
		    var n  = users.indexOf(uid);
		    var url_mask = "{% url 'week1:add_folder' user.id %}".replace({{user.id}}, uid);
		    var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
		    if ( n != -1) {
		          if (uid == {{user.id}}){
		             $('#upcomingComment').append($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+'</br><p>'+data.msg+'</p><br/><hr class="divider"/>'));
		          } else{
		             $('#upcomingComment').append($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+'&nbsp <a href="'+url_mask+'">folder</a></br><p>'+data.msg+'</p><br/><hr class="divider"/>'));
		          }

		    }else{
		          if (uid == {{user.id}}){
		             $('#upcomingComment').append($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png' %}" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+'</br><p>'+data.msg+'</p><br/><hr class="divider"/>'));
		          } else {
		             $('#upcomingComment').append($('<li><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png' %}" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+'&nbsp <a href="'+url_mask+'">folder</a></br><p>'+data.msg+'</p><br/><hr class="divider"/>'));
		          }
		    }
	     });
 
          /***
          ***/

      function submitCForm(){
            console.log('post comment');
            if ($('#comment').val().length != 0){
                socket.emit('post comment', {msg:$('#comment').val(), to:{{uid}}, from:{{user.id}}});
            }
            $('#comment').val('');            
            return false;
      }


	  socket.on('update comment', function(docs){
	    var users = [{% for u in users %} {{ u }} ,{% endfor %}];
        var photos = [{% for p in userphoto %}"{{ p }}", {% endfor %}];
	    for(var i = 0; i < docs.length; i++){
		if (docs[i]['from_user']['uid']){
			var uid = docs[i]['from_user']['uid'];
			var n  = users.indexOf(uid);
			var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
			if ( n != -1) {
			    $('#commentHistory').append($('<li><span class="error"><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+docs[i]['from_user']['first_name']+'&nbsp'+docs[i]['from_user']['last_name']+':'+docs[i]['content']+'</span><br/>'));
			}else{
			    $('#commentHistory').append($('<li><span class="error"><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png'%}" class="profile_img"></a>'+docs[i]['from_user']['first_name']+'&nbsp'+docs[i]['from_user']['last_name']+':'+docs[i]['content']+'</span><br/>'));

			}
                }
	      }
	  });

	  socket.on('new comment', function(data){
        console.log('new comment on userpage');
	    var uid = data.from;
        console.log(p_id);
	    //var users = [{% for u in users %} {{ u }} ,{% endfor %}];
	    //var photos = [{% for p in userphoto %}"{{ p }}", {% endfor %}];
	    var n  = users.indexOf(uid);
		var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
	        if ( n != -1) {
	            $('#commentHistory').prepend($('<li><span class="error"><br><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[n]+'" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+':'+data.msg+'</span><br/>'));
	        }else{
	            $('#commentHistory').prepend($('<li><span class="error"><br><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png'%}" class="profile_img"></a>'+data.from_firstname+'&nbsp'+data.from_lastname+':'+data.msg+'</span><br/>'));
	        }
	  });


	  socket.on('update user timeline history', function(data){
                console.log('update user timeline history');
                var sharedocs = data.share;
                var communitydocs = data.community;
                var len_share = sharedocs.length;
                var len_community = communitydocs.length;
	            //var users = [{% for u in users %} {{ u }} ,{% endfor %}];
	            //var photos = [{% for p in userphoto %}"{{ p }}", {% endfor %}];
                var i_share = 0;
                var i_community = 0;
				var hatsoff = '<div class="popupHatsoff" onclick="hatsoffFunction()"><img src="{% static 'images/grey_hat.png'%}" class="icons-img"></br><span class="popuptextHatsoff" id="hatsoffPop">Tip off your hat</br></span></div>';
		        //var hatsoff = '<div class="popupHatsoff" onclick="popHatsoff()"><img src="{% static 'images/hat.png'%}" class="icons-img"></br><span class="popuptextHatsoff" id="hatsoffPop">Give a Hatsoff?</br><button onclick="hatsoffFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">No</button></span></div><div class="popupGavehatsoff"><span class="popuptextGavehatsoff" id="gavehatsoffPop">Gave a Hatsoff!</span></div>';
		        //var thanks = '<div class="popupThanks" onclick="popThanks()">Thanks</br><span class="popuptextThanks" id="thanksPop">Give a thanks?</br><button onclick="thanksFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">No</button></span></div><div class="popupGave"><span class="popuptextGave" id="gavePop">Gave a Thanks!</span></div>';
		        //var follow = '<div class="popupFollow" onclick="popFollow()">Follow</br><span class="popuptextFollow" id="followPop">Follow this user?</br><button onclick="followFunction()" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">Not Now</button></span></div><div class="popupFollowed"><span class="popuptextFollowed" id="followedPop">Followed the user!</span></div>';
		        var thanks = '';
				var follow = '<div class="popupFollow" onclick="followFunction()">Follow &nbsp</br><span class="popuptextFollow" id="followPop">Following</br></span></div>';


		        while (i_share < len_share || i_community < len_community){
                    if (i_share < len_share && i_community < len_community){
                       var t_share = sharedocs[i_share]["created"];
                       var t_community = communitydocs[i_community]["created"];
                       if (t_share > t_community){
                       	  //var share = '<div class="popupShare" onclick="popShare()">Share &nbsp</br><span class="popuptextShare" id="sharePop">Share this project?</br><button onclick="shareFunction(4, 1)" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">Not Now</button></span></div><div class="popupShared"><span class="popuptextShared" id="sharedPop">Shared!</span></div>';
 						  var share = '<div class="popupShare" onclick="shareFunction(4, 1)"> Share &nbsp <span class="popuptextShared" id="sharedPop">Shared!</br></span></div>';
						  var like = '<div class="popupLike" onclick="popLike()"><button onclick="likeFunction(4, 1)">Like</button></br><span class="popuptextLike" id="likePop">You Liked it</br></span></div>';
						  var uid = sharedocs[i_share]['to_uid'];
			              var content = sharedocs[i_share]['content'];
			              var c_id = sharedocs[i_share]['_id'];
						  var n  = users.indexOf(uid);
                          var collaborate = '<div class="popupCollaborate" onclick="collaborateFunction(\''+uid+'\',\''+c_id+'\')"><button class="collaborate-btn">Collaborate &nbsp</button><span class="popuptextCollaborate" id="collaboratePop">Collaborated</br></span></div><hr class="divider"/>';
                          var comment = '<div class="well well-ssm"><ul id="commentHistory_'+c_id+'" style="list-style-type:none;"></ul><form class="form-horizontal" action=""><div class="form-group"><div class="col-md-15"><textarea class="form-control" id="c_'+c_id+'" autocomplete="off" name="message" placeholder="Please enter your comment here..." rows="3" style="width:520px;"></textarea></div></div><div class="form-group"><div class="col-md-12 text-right"><button class="btn btn-primary btn-lg" onclick="submitComment(\''+uid+'\',\''+c_id+'\')">Post</button></div></div></form></div>';
                          var created = sharedocs[i_share]['created'];
			              var colonIndex = created.indexOf(":");
                          var date = created.substring(0, colonIndex-3);
                          var datels = date.split('-');
                          var mm = months[parseInt(datels[1])-1];
                          var dd = datels[2];
                          var yy = datels[0];

                          var tag = (content['tag']) ? content['tag'] : 0;
						  var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
                          var post_link = "{% url 'week1:community_post'%}?c_id="+c_id+"&tag="+tag+"&u="+uid;
                          var skillls = "";
						  if (content['skillls']){
	                          if(content['skillls'].length != 0){
	                            var ls = content['skillls'];
	                            skillls += "<div> Tags: ";
	                            for (var j = 0; j < ls.length; j++){
	                              var skill_link = "{% url 'week1:talent_list' 12345 %}".replace(/12345/, ls[j]);
	                              skillls += "<a href='"+skill_link+"'>"+ls[j]+"</a>" + "&nbsp";
	                            } 
	                            skillls += "</div><br>";
	                          }
                          }
			                          
						  $('.timeline').append($('<li><div class="timeline-badge info"><i class="glyphicon glyphicon-credit-card"></i></div><div class="timeline-panel"><div class="timeline-heading"><h4 class="timeline-title">'+'{{t_user.first_name}}'+'&nbsp'+'{{t_user.last_name}}'+' shared</h4><p><small class="text-muted"><i class="glyphicon glyphicon-time"></i></small></p><div class="media-body"><div class="well well-lg"><a href="'+url_link+'"><img class="profile_img" src="{{media_url}}'+photos[n]+'" alt="profile"></a><span class="media-heading text-uppercase reviews" >'+'&nbsp'+content['user']['first_name']+'&nbsp'+content['user']['last_name']+'</span></a><ul class="media-date text-uppercase reviews list-inline"><li class="dd">'+dd+'</li><li class="mm">'+mm+'</li><li class="aaaa">'+yy+'</li></ul><a href="'+post_link+'"><p class="media-comment" style="display: block;">'+content['content']+'</p></a>'+skillls+like+share+hatsoff+thanks+collaborate+comment+'</div></div></li></div></li>'));
						  	//<div class="timeline-body"><br>'+content['user']['first_name']+content['user']['last_name']+'</br><hr class="divider"/>'+content['content']+'</div></div>'+share+like+hatsoff+thanks+follow+'</div></li>'));
						  if (content['replys']) {
	                           var rdocs = content['replys'];
	                           console.log('replys');
	                           for(var j=0; j < rdocs.length; j++){
	                              if (rdocs[j]['user']['uid']){
	                      			var ruid = rdocs[j]['user']['uid']
	                      			var m  = users.indexOf(ruid);
	                      			var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, ruid);
	                      			if ( m != -1) {
	                      			   $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[m]+'" class="profile_img">'+rdocs[j]['user']['first_name']+'&nbsp'+rdocs[j]['user']['last_name']+'</a>&nbsp</br><p>'+rdocs[j]['content']+'</p>'));
	                      			}else{
	                      			   $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png'%}" class="profile_img">'+rdocs[j]['user']['first_name']+'&nbsp'+rdocs[j]['user']['last_name']+'</a>&nbsp</br><p>'+rdocs[j]['content']+'</p>'));
	                      			}
	                             }
	                           }
                          }

                          i_share += 1;
                       }else{
                       	  var uid = {{t_user.id}};
			              var content = communitydocs[i_community];
                       	  //var share = '<div class="popupShare" onclick="popShare()">Share &nbsp</br><span class="popuptextShare" id="sharePop">Share this project?</br><button onclick="shareFunction(1, 1)" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">Not Now</button></span></div><div class="popupShared"><span class="popuptextShared" id="sharedPop">Shared!</span></div>';
 						  var share = '<div class="popupShare" onclick="shareFunction(1, 1)"> Share &nbsp <span class="popuptextShared" id="sharedPop">Shared!</br></span></div>';
						  var like = '<div class="popupLike" onclick="popLike()"><button onclick="likeFunction(1, 1)">Like</button></br><span class="popuptextLike" id="likePop">You Liked it</br></span></div>';

						  var c_id = content['_id'];
						  var n  = users.indexOf(uid);
                          var collaborate = '<div class="popupCollaborate" onclick="collaborateFunction(\''+uid+'\',\''+c_id+'\')"><button class="collaborate-btn">Collaborate &nbsp</button><span class="popuptextCollaborate" id="collaboratePop">Collaborated</br></span></div><hr class="divider"/>';
                          var comment = '<div class="well well-ssm"><ul id="commentHistory_'+c_id+'" style="list-style-type:none;"></ul><form class="form-horizontal" action=""><div class="form-group"><div class="col-md-15"><textarea class="form-control" id="c_'+c_id+'" autocomplete="off" name="message" placeholder="Please enter your comment here..." rows="3" style="width:520px;"></textarea></div></div><div class="form-group"><div class="col-md-12 text-right"><button class="btn btn-primary btn-lg" onclick="submitComment(\''+uid+'\',\''+c_id+'\')">Post</button></div></div></form></div>';
                          var created = communitydocs[i_community]['created'];
			              var colonIndex = created.indexOf(":");
                          var date = created.substring(0, colonIndex-3);
                          var datels = date.split('-');
                          var mm = months[parseInt(datels[1])-1];
                          var dd = datels[2];
                          var yy = datels[0];

                          var tag = (content['tag']) ? content['tag'] : 0;
						  var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
                          var post_link = "{% url 'week1:community_post'%}?c_id="+c_id+"&tag="+tag+"&u="+uid;
                          var skillls = "";
						  if (content['skillls']){
	                          if(content['skillls'].length != 0){
	                            var ls = content['skillls'];
	                            skillls += "<div> Tags: ";
	                            for (var j = 0; j < ls.length; j++){
	                              var skill_link = "{% url 'week1:talent_list' 12345 %}".replace(/12345/, ls[j]);
	                              skillls += "<a href='"+skill_link+"'>"+ls[j]+"</a>" + "&nbsp";
	                            } 
	                            skillls += "</div><br>";
	                          }
                          }


						  $('.timeline').append($('<li><div class="timeline-badge"><i class="glyphicon glyphicon-check"></i></div><div class="timeline-panel"><div class="timeline-heading"><h4 class="timeline-title">'+'{{t_user.first_name}}'+'&nbsp'+'{{t_user.last_name}}'+' posted to community </h4><p><small class="text-muted"><i class="glyphicon glyphicon-time"></i></small></p><div class="media-body"><div class="well well-lg"><a href="'+url_link+'"><img class="profile_img" src="{{media_url}}'+photos[n]+'" alt="profile"></a><span class="media-heading text-uppercase reviews" >'+'&nbsp'+content['user']['first_name']+'&nbsp'+content['user']['last_name']+'</span></a><ul class="media-date text-uppercase reviews list-inline"><li class="dd">'+dd+'</li><li class="mm">'+mm+'</li><li class="aaaa">'+yy+'</li></ul><a href="'+post_link+'"><p class="media-comment" style="display: block;">'+content['content']+'</p></a>'+skillls+like+share+hatsoff+thanks+collaborate+comment+'</div></div></li></div></li>'));
						  //$('.timeline').append($('<li><div class="timeline-badge"><i class="glyphicon glyphicon-check"></i></div><div class="timeline-panel"><div class="timeline-heading"><h4 class="timeline-title">You posted to community</h4><p><small class="text-muted"><i class="glyphicon glyphicon-time"></i></small></p><div class="timeline-body">'+communitydocs[i_community]['content']+'</div></div>'+share+like+hatsoff+thanks+follow+'</div></li>'));

						  if (content['replys']) {
	                           var rdocs = content['replys'];
	                           console.log('replys');
	                           for(var j=0; j < rdocs.length; j++){
	                              if (rdocs[j]['user']['uid']){
	                      			var ruid = rdocs[j]['user']['uid']
	                      			var m  = users.indexOf(ruid);
	                      			var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, ruid);
	                      			if ( m != -1) {
	                      			   $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[m]+'" class="profile_img">'+rdocs[j]['user']['first_name']+'&nbsp'+rdocs[j]['user']['last_name']+'</a>&nbsp</br><p>'+rdocs[j]['content']+'</p>'));
	                      			}else{
	                      			   $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png'%}" class="profile_img">'+rdocs[j]['user']['first_name']+'&nbsp'+rdocs[j]['user']['last_name']+'</a>&nbsp</br><p>'+rdocs[j]['content']+'</p>'));
	                      			}
	                             }
	                           }
                          }

                          i_community += 1;
                       }

                    }else if(i_share < len_share){

						//var share = '<div class="popupShare" onclick="popShare()">Share &nbsp</br><span class="popuptextShare" id="sharePop">Share this project?</br><button onclick="shareFunction(4, 1)" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">Not Now</button></span></div><div class="popupShared"><span class="popuptextShared" id="sharedPop">Shared!</span></div>';
 						var share = '<div class="popupShare" onclick="shareFunction(4, 1)"> Share &nbsp <span class="popuptextShared" id="sharedPop">Shared!</br></span></div>';
						var like = '<div class="popupLike" onclick="popLike()"><button onclick="likeFunction(4, 1)">Like</button></br><span class="popuptextLike" id="likePop">You Liked it</br></span></div>';
						var uid = sharedocs[i_share]['to_uid'];
			            var content = sharedocs[i_share]['content'];
			            var c_id = sharedocs[i_share]['_id'];
						var n  = users.indexOf(uid);
                        var collaborate = '<div class="popupCollaborate" onclick="collaborateFunction(\''+uid+'\',\''+c_id+'\')"><button class="collaborate-btn">Collaborate &nbsp</button><span class="popuptextCollaborate" id="collaboratePop">Collaborated</br></span></div><hr class="divider"/>';
                        var comment = '<div class="well well-ssm"><ul id="commentHistory_'+c_id+'" style="list-style-type:none;"></ul><form class="form-horizontal" action=""><div class="form-group"><div class="col-md-15"><textarea class="form-control" id="c_'+c_id+'" autocomplete="off" name="message" placeholder="Please enter your comment here..." rows="3" style="width:520px;"></textarea></div></div><div class="form-group"><div class="col-md-12 text-right"><button class="btn btn-primary btn-lg" onclick="submitComment(\''+uid+'\',\''+c_id+'\')">Post</button></div></div></form></div>';
                        var created = sharedocs[i_share]['created'];
			            var colonIndex = created.indexOf(":");
                        var date = created.substring(0, colonIndex-3);
                        var datels = date.split('-');
                        var mm = months[parseInt(datels[1])-1];
                        var dd = datels[2];
                        var yy = datels[0];

                        var tag = (content['tag']) ? content['tag'] : 0;
						var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
                        var post_link = "{% url 'week1:community_post'%}?c_id="+c_id+"&tag="+tag+"&u="+uid;
                        var skillls = "";
						if (content['skillls']){
	                        if(content['skillls'].length != 0){
	                          var ls = content['skillls'];
	                          skillls += "<div> Tags: ";
	                          for (var j = 0; j < ls.length; j++){
	                            var skill_link = "{% url 'week1:talent_list' 12345 %}".replace(/12345/, ls[j]);
	                            skillls += "<a href='"+skill_link+"'>"+ls[j]+"</a>" + "&nbsp";
	                          } 
	                          skillls += "</div><br>";
	                        }
                        }
			                          
					    $('.timeline').append($('<li><div class="timeline-badge info"><i class="glyphicon glyphicon-credit-card"></i></div><div class="timeline-panel"><div class="timeline-heading"><h4 class="timeline-title">'+'{{t_user.first_name}}'+'&nbsp'+'{{t_user.last_name}}'+' shared</h4><p><small class="text-muted"><i class="glyphicon glyphicon-time"></i></small></p><div class="media-body"><div class="well well-lg"><a href="'+url_link+'"><img class="profile_img" src="{{media_url}}'+photos[n]+'" alt="profile"></a><span class="media-heading text-uppercase reviews" >'+'&nbsp'+content['user']['first_name']+'&nbsp'+content['user']['last_name']+'</span></a><ul class="media-date text-uppercase reviews list-inline"><li class="dd">'+dd+'</li><li class="mm">'+mm+'</li><li class="aaaa">'+yy+'</li></ul><a href="'+post_link+'"><p class="media-comment" style="display: block;">'+content['content']+'</p></a>'+skillls+like+share+hatsoff+thanks+collaborate+comment+'</div></div></li></div></li>'));

					    if (content['replys']) {
	                           var rdocs = content['replys'];
	                           console.log('replys');
	                           for(var j=0; j < rdocs.length; j++){
	                              if (rdocs[j]['user']['uid']){
	                      			var ruid = rdocs[j]['user']['uid']
	                      			var m  = users.indexOf(ruid);
	                      			var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, ruid);
	                      			if ( m != -1) {
	                      			   $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[m]+'" class="profile_img">'+rdocs[j]['user']['first_name']+'&nbsp'+rdocs[j]['user']['last_name']+'</a>&nbsp</br><p>'+rdocs[j]['content']+'</p>'));
	                      			}else{
	                      			   $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png'%}" class="profile_img">'+rdocs[j]['user']['first_name']+'&nbsp'+rdocs[j]['user']['last_name']+'</a>&nbsp</br><p>'+rdocs[j]['content']+'</p>'));
	                      			}
	                             }
	                           }
                        }

                        i_share += 1;

                    }else if(i_community < len_community){

						var uid = {{t_user.id}};
			            var content = communitydocs[i_community];
 						var share = '<div class="popupShare" onclick="shareFunction(1, 1)"> Share &nbsp <span class="popuptextShared" id="sharedPop">Shared!</br></span></div>';
                       	//var share = '<div class="popupShare" onclick="popShare()">Share &nbsp</br><span class="popuptextShare" id="sharePop">Share this project?</br><button onclick="shareFunction(1, 1)" class="shareskillButton">Yes</button>&nbsp<button class="shareskillButton">Not Now</button></span></div><div class="popupShared"><span class="popuptextShared" id="sharedPop">Shared!</span></div>';
						var like = '<div class="popupLike" onclick="popLike()"><button onclick="likeFunction(1, 1)">Like</button></br><span class="popuptextLike" id="likePop">You Liked it</br></span></div>';

						var c_id = content['_id'];
						var n  = users.indexOf(uid);
                        var collaborate = '<div class="popupCollaborate" onclick="collaborateFunction(\''+uid+'\',\''+c_id+'\')"><button class="collaborate-btn">Collaborate &nbsp</button><span class="popuptextCollaborate" id="collaboratePop">Collaborated</br></span></div><hr class="divider"/>';
                        var comment = '<div class="well well-ssm"><ul id="commentHistory_'+c_id+'" style="list-style-type:none;"></ul><form class="form-horizontal" action=""><div class="form-group"><div class="col-md-15"><textarea class="form-control" id="c_'+c_id+'" autocomplete="off" name="message" placeholder="Please enter your comment here..." rows="3" style="width:520px;"></textarea></div></div><div class="form-group"><div class="col-md-12 text-right"><button class="btn btn-primary btn-lg" onclick="submitComment(\''+uid+'\',\''+c_id+'\')">Post</button></div></div></form></div>';
                        var created = communitydocs[i_community]['created'];
			            var colonIndex = created.indexOf(":");
                        var date = created.substring(0, colonIndex-3);
                        var datels = date.split('-');
                        var mm = months[parseInt(datels[1])-1];
                        var dd = datels[2];
                        var yy = datels[0];

                        var tag = (content['tag']) ? content['tag'] : 0;
						var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, uid);
                        var post_link = "{% url 'week1:community_post'%}?c_id="+c_id+"&tag="+tag+"&u="+uid;
                        var skillls = "";
						if (content['skillls']){
	                        if(content['skillls'].length != 0){
	                          var ls = content['skillls'];
	                          skillls += "<div> Tags: ";
	                          for (var j = 0; j < ls.length; j++){
	                            var skill_link = "{% url 'week1:talent_list' 12345 %}".replace(/12345/, ls[j]);
	                            skillls += "<a href='"+skill_link+"'>"+ls[j]+"</a>" + "&nbsp";
	                          } 
	                          skillls += "</div><br>";
	                        }
                        }

						$('.timeline').append($('<li><div class="timeline-badge"><i class="glyphicon glyphicon-check"></i></div><div class="timeline-panel"><div class="timeline-heading"><h4 class="timeline-title">'+'{{t_user.first_name}}'+'&nbsp'+'{{t_user.last_name}}'+' posted to community </h4><p><small class="text-muted"><i class="glyphicon glyphicon-time"></i></small></p><div class="media-body"><div class="well well-lg"><a href="'+url_link+'"><img class="profile_img" src="{{media_url}}'+photos[n]+'" alt="profile"></a><span class="media-heading text-uppercase reviews" >'+'&nbsp'+content['user']['first_name']+'&nbsp'+content['user']['last_name']+'</span></a><ul class="media-date text-uppercase reviews list-inline"><li class="dd">'+dd+'</li><li class="mm">'+mm+'</li><li class="aaaa">'+yy+'</li></ul><a href="'+post_link+'"><p class="media-comment" style="display: block;">'+content['content']+'</p></a>'+skillls+like+share+hatsoff+thanks+collaborate+comment+'</div></div></li></div></li>'));

						if (content['replys']) {
	                           var rdocs = content['replys'];
	                           console.log('replys');
	                           for(var j=0; j < rdocs.length; j++){
	                              if (rdocs[j]['user']['uid']){
	                      			var ruid = rdocs[j]['user']['uid']
	                      			var m  = users.indexOf(ruid);
	                      			var url_link = "{% url 'week1:get_profile' user.id %}".replace({{user.id}}, ruid);
	                      			if ( m != -1) {
	                      			   $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{{media_url}}'+photos[m]+'" class="profile_img">'+rdocs[j]['user']['first_name']+'&nbsp'+rdocs[j]['user']['last_name']+'</a>&nbsp</br><p>'+rdocs[j]['content']+'</p>'));
	                      			}else{
	                      			   $('#commentHistory_'+c_id).append($('<hr class="solid-divider"/><li><a href="'+url_link+'" class="link-userpage"><img src="{% static 'images/profileimage.png'%}" class="profile_img">'+rdocs[j]['user']['first_name']+'&nbsp'+rdocs[j]['user']['last_name']+'</a>&nbsp</br><p>'+rdocs[j]['content']+'</p>'));
	                      			}
	                             }
	                           }
                        }

                        i_community += 1;

                    }

                }

	  });

	  function encode (input) {
          var keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
          var output = "";
          var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
          var i = 0;

          while (i < input.length) {
              chr1 = input[i++];
              chr2 = i < input.length ? input[i++] : Number.NaN; // Not sure if the index 
              chr3 = i < input.length ? input[i++] : Number.NaN; // checks are needed here

              enc1 = chr1 >> 2;
              enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
              enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
              enc4 = chr3 & 63;

              if (isNaN(chr2)) {
                  enc3 = enc4 = 64;
              } else if (isNaN(chr3)) {
                  enc4 = 64;
              }
              output += keyStr.charAt(enc1) + keyStr.charAt(enc2) +
                        keyStr.charAt(enc3) + keyStr.charAt(enc4);
          }
          return output;
        }

	</script>


	<!--div id="thanks-hatsoff">
	    <h4>Thanks - Hats off</h4>
	    <div id="hatsoffusers">
		{% if hatsusers %}
		     {% for h in hatsusers %}
			{% if h.photo %}
			   <img src="{{ h.photo.url }}" width="50px">
			{% else %}
			   <img src="{% static 'images/profileimage.png'%}" width="50px">
			{% endif %}
		     {% endfor %}
		{% endif %}
	    </div>
	</div-->

<!--div id="home-comment">
    <div id="commentpost-wrapper">
    <h4> Comments </h4>
	 <form action="" id="postComment">
	    <textarea id="comment" autocomplete="off" placeholder=" Comment for {{t_user.first_name}}" rows="3" cols="60"></textarea>
            <button onclick="submitCForm()">Post</button>
	 </form>
    </div>

    <div id="comments-wrapper">
	 <ul style="list-style-type:none; padding-left: 0;">
	     <div id="commentHistory"></div>
	 </ul>
    </div>
    </div>
</div-->

<div class="timeline-container">
    <h3>Activity</h3>
    <ul class="timeline">
    </ul>
</div>


</div>


<div class="popup-box chat-popup" id="qnimate">
		  	<div class="popup-head">
				<div class="popup-head-left pull-left"><!--img src="http://bootsnipp.com/img/avatars/bcf1c0d13e5500875fdd5a7e8ad9752ee16e7462.jpg" alt="iamgurdeeposahan"--> {{t_user.first_name}} &nbsp {{t_user.last_name}}</div>
				  <div class="popup-head-right pull-right">
					<!--div class="btn-group">
						  <button class="chat-header-button" data-toggle="dropdown" type="button" aria-expanded="false">
						   <i class="glyphicon glyphicon-cog"></i> 
						   </button>
						  <ul role="menu" class="dropdown-menu pull-right">
							<li><a href="#">Media</a></li>
							<li><a href="#">Block</a></li>
							<li><a href="#">Clear Chat</a></li>
							<li><a href="#">Email Chat</a></li>
						  </ul>
					</div-->
					
					<!--button data-widget="remove" id="removeClass" class="chat-header-button pull-right" type="button"><i class="glyphicon glyphicon-off"></i></button-->
					<button data-widget="remove" id="removeClass" class="chat-header-button pull-right" type="button">x</button>
                  </div>
		  		</div>
				<div class="popup-messages">
    		
					<div class="direct-chat-messages" id="chat_room">
					
						<!--div class="chat-box-single-line">
							<abbr class="timestamp">October 8th, 2015</abbr>
						</div>
					
	                    <div class="direct-chat-msg doted-border">
		                    <div class="direct-chat-info clearfix">
		                        <span class="direct-chat-name pull-left">Osahan</span>
		                    </div>
	                      	<img alt="message user image" src="http://bootsnipp.com/img/avatars/bcf1c0d13e5500875fdd5a7e8ad9752ee16e7462.jpg" class="direct-chat-img">
		                    <div class="direct-chat-text">
		                        Hey bro, how’s everything going ?
		                    </div>
							<div class="direct-chat-info clearfix">
		                        <span class="direct-chat-timestamp pull-right">3.36 PM</span>
		                    </div>
	                    </div>
					
					
						<div class="chat-box-single-line">
							<abbr class="timestamp">October 9th, 2015</abbr>
						</div>
					
	                    <div class="direct-chat-msg doted-border">
	                      <div class="direct-chat-info clearfix">
	                        <span class="direct-chat-name pull-left">Osahan</span>
	                      </div>
	                      <img alt="iamgurdeeposahan" src="http://bootsnipp.com/img/avatars/bcf1c0d13e5500875fdd5a7e8ad9752ee16e7462.jpg" class="direct-chat-img">
	                      <div class="direct-chat-text">
	                        Hey bro, how’s everything going ?
	                      </div>
						  <div class="direct-chat-info clearfix">
	                        <span class="direct-chat-timestamp pull-right">3.36 PM</span>
	                      </div>
	                    </div-->
					
                  </div>
			
			</div>
			<div class="popup-messages-footer">
				<textarea id="status_message" placeholder="Type a message..." rows="20" cols="40" name="message"></textarea>
				<input id="image_in_message" type="file" class="form-photo"/>
				<div class="btn-footer">
					<!--button class="bg_none"><i class="glyphicon glyphicon-film"></i> </button>
					<button class="bg_none"><i class="glyphicon glyphicon-camera"></i> </button>
		            <button class="bg_none"><i class="glyphicon glyphicon-paperclip"></i> </button>
					<button class="bg_none pull-right"><i class="glyphicon glyphicon-thumbs-up"></i> </button-->
					<button class="btn btn-primary btn-lg pull-right" onclick="sendMessage()">Send </button>
				</div>
			</div>
</div>

{% endblock %}
