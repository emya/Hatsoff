{% extends 'week1/basehome.html'%}

{% block content %}
{% load staticfiles %}


<div id="home-friends">
</div>

<div id="home-main">
    
    <div id="home-firstcolumn">
      
	<div class="home-step">
            <ul style="list-style-type:none">
		<li>City:{{target_profile.city}}</li>
		<li>Works at:{{target_profile.worksAt}}</li>
		<li>Education:{{target_profile.education}}</li>
		<li>Language:{{target_profile.language}}</li>
		<li>skills:{{target_profile.skill1}}</li>
            </ul>
	</div>

	<div class="home-step">
            <ul style="list-style-type:none">
		<li>Fun fact about you:{{target_profile.funaboutyou}}</li>
		<li>Hobby:{{target_profile.hobby}}</li>
		<li>Favorite quote:{{target_profile.fQuote}}</li>
		<li>Favorite film:{{target_profile.fFilm}}</li>
		<li>Favorite TV show:{{target_profile.fTV}}</li>
		<li>Favorite youTube channel:{{target_profile.fYoutube}}</li>
		<li>Favorite book:{{target_profile.fBook}}</li>
            </ul>
	</div>
    </div>

    <div id="home-secondcolumn">
	<div class="home-step">
	{% if target_profile.photo %}
	    <img src="{{ target_profile.photo.url }}" class="maincontent">
	{% else %}
	    <img src="{% static 'images/profileimage.png'%}" class="maincontent">
	{% endif %}
        </div>
    </div>

    <div id="home-thirdcolumn">
       <ul style="list-style-type:none">
	 <li><a href=""><img src="{% static 'images/hat.png'%}" class="icons-img"></a></li>
	 <li><img src="{% static 'images/chat.png'%}" class="icons-img"></li>
	 <li><img src="{% static 'images/pitch.png'%}" class="icons-img"></li>
       </ul>

       <div class="home-bottom">
	    <ul style="list-style-type:none">
	      <li><a href=""><img src="{% static 'images/contribute.png'%}" class="icons-img"></a></li>
	      <li><img src="{% static 'images/recommend.png'%}" class="icons-img"></li>
	      <li><img src="{% static 'images/help.png'%}" class="icons-img"></li>
	    </ul>
       </div>
    </div>

<div id="home-main-center">
	<div class="home-step">
            <h4>Previous Works</h4>
            <ul style="list-style-type:none">
	    {% if target_profile.showcase1 %}
	        <li><img src="{{ target_profile.showcase1.url }}" class="maincontent"></li>
	    {% else %}
	        <li><img src="{% static 'images/empty_showcase.png'%}" class="maincontent"></li>
	    {% endif %}
	    <li>Description of work:{{target_profile.describe1}}</li>
            </ul>
	</div>

	<div id="whats-next">
            <h4>Whatâ€™s Next</h4>
	    <img src="{% static 'images/empty_showcase.png'%}" class="whatsnext">
		<ul style="list-style-type:none">
		    <li>Description of work:</li>
		    <li>Your role:</li>
		    <li>Status of work:</li>
		    <li>Target finish date:</li>
		    <li>Comments:</li>
		</ul>
	</div>

	<div id="thanks-hatsoff">
	    <h4>Thanks - Hats off</h4>
	    <div id="hatsoffusers">
		{% if hatsusers %}
		     {% for h in hatsusers %}
			{% if h.photo %}
			   <img src="{{ h.photo.url }}" width="50px">
			{% else %}
			   <img src="{% static 'images/profileimage.png'%}" width="50px">
			{% endif %}
		     {% endfor %}
		{% endif %}
	    </div>
	</div>

<div id="home-comment">
    <h4> Comments </h4>
    <form action="" id="postComment">
       <input id="comment" autocomplete="off" /><button>Send</button>
    </form>

    <ul style="list-style-type:none">
        <div id="commentHistory"></div>
    </ul>

    <!--script src="/socket.io/socket.io.js"></script-->
    <script src="{{nodejs_url}}/socket.io/socket.io.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
          var socket = io.connect("{{nodejs_url}}");
          socket.emit('join message', {uid:{{user.id}}, firstname:"{{user.first_name}}", lastname:"{{user.last_name}}"});

          socket.emit('see userpage', {uid:{{user.id}}, to:{{uid}}, uname:"{{user.first_name}}"});

  	  $('#postComment').submit(function(){
	        $('#commentHistory').prepend($('<li><span class="error"><br>'+"{{user.first_name}}"+':'+$('#comment').val()+'</span><br/>'));
            socket.emit('post comment', {msg:$('#comment').val(), to:{{uid}}, from:{{user.id}}}, function(data){
            });
            $('#comment').val('');            
            return false;
          });

	  socket.on('update comment', function(docs){
              for(var i = 0; i < docs.length; i++){
	         $('#commentHistory').append($('<li><span class="error"><br>'+docs[i]['from_user']['first_name']+':'+docs[i]['content']+'</span><br/>'));
              }
          });
           
    </script>
    </div>


</div>


</div>

{% endblock %}
